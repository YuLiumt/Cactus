

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Thorn Guide &mdash; Cactus 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Thorn Write" href="../ThornWrite/ThornWrite.html" />
    <link rel="prev" title="Get Start" href="../GetStart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Cactus
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../GetStart.html">Get Start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Thorn Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parameter-file-syntax">Parameter File Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flesh">Flesh</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameter">parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grid">Grid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#coordbase">CoordBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#warning">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cartgrid3d">CartGrid3D</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#symbase">SymBase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adaptive-mesh-refinement">Adaptive Mesh Refinement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#carpet">Carpet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetlib">CarpetLib</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetregrid2">CarpetRegrid2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#volumeintegrals-grmhd">VolumeIntegrals_GRMHD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpettracker">CarpetTracker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nstracker">NSTracker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hydro-analysis">Hydro_Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#puncturetracker">PunctureTracker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">Warning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetinterp-carpetinterp2">CarpetInterp/CarpetInterp2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#carpetreduce">CarpetReduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="#carpetmask">CarpetMask</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#initial-data">Initial Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initbase">InitBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#admbase">ADMBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id20">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#staticconformal">StaticConformal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hydrobase">HydroBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id24">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tmunubase">TmunuBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id25">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#meudon-bin-ns">Meudon_Bin_NS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id26">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#seed-magnetic-fields">Seed_Magnetic_Fields</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id27">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#seed-magnetic-fields-bns">Seed_Magnetic_Fields_BNS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#twopunctures">TwoPunctures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id29">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tovsolver">TOVSolver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id30">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exact">Exact</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id31">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#boundary">Boundary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Boundary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id33">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">Warning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#evolution">Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#time">Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id35">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mol">MoL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id36">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dissipation">Dissipation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id38">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ml-bssn">ML_BSSN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id39">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ml-bssn-helper">ML_BSSN_Helper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id41">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#illinoisgrmhd">illinoisGRMHD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id42">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id-conerter-ilgrmhd">ID_conerter_ILGRMHD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id43">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#convert-to-hydrobase">convert_to_HydroBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id44">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#analysis">Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#admanalysis">ADMAnalysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id45">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">Warning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#admmass">ADMMass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id48">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id49">Warning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#smallbpoynet">smallbPoynET</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id51">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#particle-traceret">particle_tracerET</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ml-admconstraints">ML_ADMConstraints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id53">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quasilocalmeasures">QuasiLocalMeasures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id54">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ahfinderdirect">AHFinderDirect</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id56">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#multipole">Multipole</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id57">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#weylscal4">WeylScal4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id58">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#numerical">Numerical</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#spacemask">SpaceMask</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id59">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sphericalsurface">SphericalSurface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id60">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utility">Utility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nanchecker">NaNChecker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id61">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#systemstatistics">SystemStatistics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id62">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#trigger">Trigger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#terminationtrigger">TerminationTrigger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id63">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i-o">I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ioutil">IOUtil</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id64">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#iobasic">IOBasic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reduction-operations">Reduction Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id66">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ioascii">IOASCII</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id68">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id69">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetiobasic">CarpetIOBasic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id70">Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id71">Warning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetioscalar">CarpetIOScalar</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id72">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetioascii">CarpetIOASCII</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id73">Parameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#carpetiohdf5">CarpetIOHDF5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id74">Parameter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ThornWrite/ThornWrite.html">Thorn Write</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lorene/main.html">Lorene</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Kranc/Kranc.html">Kranc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Reference.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Cactus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Thorn Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/note/Guide/main.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="thorn-guide">
<h1>Thorn Guide<a class="headerlink" href="#thorn-guide" title="Permalink to this headline">¶</a></h1>
<p>Typographical Conventions:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(&lt; \dots &gt;\)</span> Indicates a compulsory argument.</p></li>
<li><p><span class="math notranslate nohighlight">\([ \dots ]\)</span> Indicates an optional argument.</p></li>
<li><p><span class="math notranslate nohighlight">\(|\)</span> Indicates an exclusive or.</p></li>
</ul>
<div class="section" id="parameter-file-syntax">
<h2>Parameter File Syntax<a class="headerlink" href="#parameter-file-syntax" title="Permalink to this headline">¶</a></h2>
<p>A parameter file is used to control the behaviour of a Cactus executable.
It specifies initial values for parameters as defined in the various thorns’ param.ccl files.
The name of a parameter file is often given the suffix .par, but this is not mandatory.</p>
<p>A parameter file is a text file whose lines are either comments or parameter statements.
Comments are begin with either ‘#’ or ‘!’.
A parameter statement consists of one or more parameter names, followed by an ‘=’, followed by the value for this parameter.</p>
<p>The first parameter statement in any parameter file should set ActiveThorns, which is a special parameter that tells the program which thorns are to be activated.
Only parameters from active thorns can be set (and only those routines scheduled by active thorns are run).
By default, all thorns are inactive.</p>
</div>
<div class="section" id="flesh">
<h2>Flesh<a class="headerlink" href="#flesh" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parameter">
<h3>parameter<a class="headerlink" href="#parameter" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Description of this simulation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_run_title</span> <span class="o">=</span> <span class="s2">&quot;Description of this simulation&quot;</span>
</pre></div>
</div>
</li>
<li><p>Give detailed information for each warning statement</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_full_warnings</span> <span class="o">=</span> <span class="n">yes</span>
<span class="go">WARNING level 3 from host ubuntu process 0</span>
<span class="go">    while executing schedule bin CCTK_BASEGRID, routine IOASCII::IOASCII_Choose1D</span>
<span class="go">    in thorn IOUtil, file /home4/yuliu/Cactus/arrangements/CactusBase/IOUtil/src/Utils.c:361:</span>
<span class="go">    -&gt; IOUtil_1DLines: Found no default Cartesian coordinate system associated with grid variables of dimension 2, and no slice center index coordinates were given either - slice center will not be set up for output of 1D lines from 2D variables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_full_warnings</span> <span class="o">=</span> <span class="n">no</span>
<span class="go">WARNING[L3,P0] (IOUtil): IOUtil_1DLines: Found no default Cartesian coordinate system associated with grid variables of dimension 2, and no slice center index coordinates were given either - slice center will not be set up for output of 1D lines from 2D variables</span>
</pre></div>
</div>
</li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Level</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>abort the Cactus run</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>the results of this run will be wrong,</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>the user should know about this, but the problem is not terribly surprising</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>this is for small problems that can probably be ignored, but that careful people may want to know about</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>these messages are probably useful only for debugging purposes</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Print the scheduling tree to standard output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_show_schedule</span> <span class="o">=</span> <span class="n">yes</span>
<span class="go">if (recover initial data)</span>
<span class="go">    Recover parameters</span>
<span class="go">endif</span>
<span class="go">Startup routines</span>
<span class="go">    [CCTK_STARTUP]</span>
<span class="go">Startup routines which need an existing grid hierarchy</span>
<span class="go">    [CCTK_WRAGH]</span>
<span class="go">Parameter checking routines</span>
<span class="go">    [CCTK_PARAMCHECK]</span>
<span class="go">Initialisation</span>
<span class="go">    if (NOT (recover initial data AND recovery_mode is &#39;strict&#39;))</span>
<span class="go">        [CCTK_PREREGRIDINITIAL]</span>
<span class="go">        Set up grid hierarchy</span>
<span class="go">        [CCTK_POSTREGRIDINITIAL]</span>
<span class="go">        [CCTK_BASEGRID]</span>
<span class="go">        [CCTK_INITIAL]</span>
<span class="go">        [CCTK_POSTINITIAL]</span>
<span class="go">        Initialise finer grids recursively</span>
<span class="go">        Restrict from finer grids</span>
<span class="go">        [CCTK_POSTRESTRICTINITIAL]</span>
<span class="go">        [CCTK_POSTPOSTINITIAL]</span>
<span class="go">        [CCTK_POSTSTEP]</span>
<span class="go">    endif</span>
<span class="go">    if (recover initial data)</span>
<span class="go">        [CCTK_BASEGRID]</span>
<span class="go">        [CCTK_RECOVER_VARIABLES]</span>
<span class="go">        [CCTK_POST_RECOVER_VARIABLES]</span>
<span class="go">    endif</span>
<span class="go">    if (checkpoint initial data)</span>
<span class="go">        [CCTK_CPINITIAL]</span>
<span class="go">    endif</span>
<span class="go">    if (analysis)</span>
<span class="go">        [CCTK_ANALYSIS]</span>
<span class="go">    endif</span>
<span class="go">Output grid variables</span>
<span class="go">do loop over timesteps</span>
<span class="go">    [CCTK_PREREGRID]</span>
<span class="go">    Change grid hierarchy</span>
<span class="go">    [CCTK_POSTREGRID]</span>
<span class="go">    Rotate timelevels</span>
<span class="go">    iteration = iteration+1</span>
<span class="go">    t = t+dt</span>
<span class="go">    [CCTK_PRESTEP]</span>
<span class="go">    [CCTK_EVOL]</span>
<span class="go">    Evolve finer grids recursively</span>
<span class="go">    Restrict from finer grids</span>
<span class="go">    [CCTK_POSTRESTRICT]</span>
<span class="go">    [CCTK_POSTSTEP]</span>
<span class="go">    if (checkpoint)</span>
<span class="go">        [CCTK_CHECKPOINT]</span>
<span class="go">    endif</span>
<span class="go">    if (analysis)</span>
<span class="go">        [CCTK_ANALYSIS]</span>
<span class="go">    endif</span>
<span class="go">    Output grid variables</span>
<span class="go">enddo</span>
<span class="go">Termination routines</span>
<span class="go">    [CCTK_TERMINATE]</span>
<span class="go">Shutdown routines</span>
<span class="go">    [CCTK_SHUTDOWN]</span>
<span class="go">Routines run after changing the grid hierarchy:</span>
<span class="go">    [CCTK_POSTREGRID]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_show_schedule</span> <span class="o">=</span> <span class="n">no</span>
<span class="go">None</span>
</pre></div>
</div>
</li>
<li><p>Provide runtime of each thorn</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_timer_output</span> <span class="o">=</span> <span class="s2">&quot;full&quot;</span>
<span class="go">===================================================================================================</span>
<span class="go">Thorn           | Scheduled routine in time bin           | gettimeofday [secs] | getrusage [secs]</span>
<span class="go">===================================================================================================</span>
<span class="go">CoordBase       | Register a GH extension to store the coo|          0.00000400 |       0.00000000</span>
<span class="go">---------------------------------------------------------------------------------------------------</span>
<span class="go">                | Total time for CCTK_STARTUP             |          0.00000400 |       0.00000000</span>
<span class="go">===================================================================================================</span>
<span class="go">---------------------------------------------------------------------------------------------------</span>
<span class="go">                | Total time for simulation               |          0.00004400 |       0.00000000</span>
<span class="go">===================================================================================================</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_timer_output</span> <span class="o">=</span> <span class="s2">&quot;off&quot;</span>
<span class="go">None</span>
</pre></div>
</div>
</li>
<li><p>Condition on which to terminate evolution loop</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">terminate</span> <span class="o">=</span> <span class="s2">&quot;iteration&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_itlast</span> <span class="o">=</span> <span class="mi">0</span>
<span class="go">----------------</span>
<span class="go">it  |          |</span>
<span class="go">    |    t     |</span>
<span class="go">----------------</span>
<span class="go">  0 |    0.000 |</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">terminate</span> <span class="o">=</span> <span class="s2">&quot;iteration&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_itlast</span> <span class="o">=</span> <span class="mi">5</span>
<span class="go">----------------</span>
<span class="go">it  |          |</span>
<span class="go">    |    t     |</span>
<span class="go">----------------</span>
<span class="go">  0 |    0.000 |</span>
<span class="go">  1 |    1.000 |</span>
<span class="go">  2 |    2.000 |</span>
<span class="go">  3 |    3.000 |</span>
<span class="go">  4 |    4.000 |</span>
<span class="go">  5 |    5.000 |</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">terminate</span> <span class="o">=</span> <span class="s2">&quot;time&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_initial_time</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cactus</span><span class="p">::</span><span class="n">cctk_final_time</span> <span class="o">=</span> <span class="mi">15</span>
<span class="go">----------------</span>
<span class="go">it  |          |</span>
<span class="go">    |    t     |</span>
<span class="go">----------------</span>
<span class="go">  0 |   10.000 |</span>
<span class="go">  1 |   11.000 |</span>
<span class="go">  2 |   12.000 |</span>
<span class="go">  3 |   13.000 |</span>
<span class="go">  4 |   14.000 |</span>
<span class="go">  5 |   15.000 |</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="grid">
<h2>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h2>
<div class="section" id="coordbase">
<h3>CoordBase<a class="headerlink" href="#coordbase" title="Permalink to this headline">¶</a></h3>
<p>The CoordBase thorn provides a method of registering coordinate systems and their properties.</p>
<p>CoordBase provides a way for specifying the extent of the simulation domain that is independent of the actual coordinate and symmetry thorns. This is necessary because the size of the physical domain is not necessarily the same as the size of the computational grid, which is usually enlarged by symmetry zones and/or boundary zones.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The black hole “source” region has a length scale of <span class="math notranslate nohighlight">\(G M / c^{2}\)</span>, where G is Newton’s constant, M is the total mass of the two black holes, and c is the speed of light. The gravitational waves produced by the source have a length scale up to <span class="math notranslate nohighlight">\(\sim 100 G M / c^{2}\)</span>. The source region requires grid zones of size <span class="math notranslate nohighlight">\(\lesssim 0.01 G M / c^{2}\)</span> to accurately capture the details of the black holes’ interaction, while the extent of the grid needs to be several hundred <span class="math notranslate nohighlight">\(G M / c^{2}\)</span> to accurately capture the details of the gravitational wave signal.</p>
</div>
<div class="section" id="id1">
<h4>Parameter<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Specifying the extent of the physical domain.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">domainsize</span> <span class="o">=</span> <span class="s2">&quot;minmax&quot;</span> <span class="c1"># lower and upper boundary locations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">xmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">ymin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">zmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">xmax</span> <span class="o">=</span>  <span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">ymax</span> <span class="o">=</span>  <span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">zmax</span> <span class="o">=</span>  <span class="mf">540.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">spacing</span> <span class="o">=</span> <span class="s2">&quot;gridspacing&quot;</span> <span class="c1"># grid spacing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">dx</span>   <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">dx</span>   <span class="o">=</span> <span class="mf">18.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">dy</span>   <span class="o">=</span> <span class="mf">18.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">dz</span>   <span class="o">=</span> <span class="mf">18.0</span>
<span class="go">INFO (Carpet): CoordBase domain specification for map 0:</span>
<span class="go">    physical extent: [-540,-540,-540] : [540,540,540]   ([1080,1080,1080])</span>
<span class="go">    base_spacing   : [18,18,18]</span>
</pre></div>
</div>
</li>
<li><p>Boundary description.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_x_lower</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_y_lower</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_z_lower</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_x_upper</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_y_upper</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_z_upper</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_x_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_y_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_z_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_x_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_y_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_internal_z_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_x_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_y_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_z_lower</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_x_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_y_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_staggered_z_upper</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_x_lower</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_y_lower</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_z_lower</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_x_upper</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_y_upper</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_shiftout_z_upper</span> <span class="o">=</span> <span class="mi">0</span>
<span class="go">INFO (Carpet): Boundary specification for map 0:</span>
<span class="go">    nboundaryzones: [[3,3,3],[3,3,3]]</span>
<span class="go">    is_internal   : [[0,0,0],[0,0,0]]</span>
<span class="go">    is_staggered  : [[0,0,0],[0,0,0]]</span>
<span class="go">    shiftout      : [[0,0,0],[0,0,0]]</span>
<span class="go">INFO (Carpet): CoordBase domain specification for map 0:</span>
<span class="go">    interior extent: [-522,-522,-522] : [522,522,522]   ([1044,1044,1044])</span>
<span class="go">    exterior extent: [-576,-576,-576] : [576,576,576]   ([1152,1152,1152])</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="warning">
<h4>Warning<a class="headerlink" href="#warning" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The boundary must be contained in the active part of the domain boundaries &lt;= domain_active</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">xmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">xmax</span> <span class="o">=</span> <span class="o">+</span><span class="mf">200.0</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="cartgrid3d">
<h3>CartGrid3D<a class="headerlink" href="#cartgrid3d" title="Permalink to this headline">¶</a></h3>
<p>CartGrid3D allows you to set up coordinates on a 3D Cartesian grid in a flexible manner.</p>
<div class="graphviz"><object data="../../_images/graphviz-dae719d91c1596ef5c4d6d698f1fc6328b9fd38e.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CartGrid3D&quot; -&gt; &quot;Coordinate&quot;;
}</p></object></div>
<div class="section" id="id2">
<h4>Parameter<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Get specification from CoordBase</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CartGrid3D</span><span class="p">::</span><span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;coordbase&quot;</span>
</pre></div>
</div>
</li>
<li><p>Get specification from MultiPatch</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CartGrid3D</span><span class="p">::</span><span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;multipatch&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CartGrid3D</span><span class="p">::</span><span class="n">set_coordinate_ranges_on</span> <span class="o">=</span> <span class="s2">&quot;all maps&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="output">
<h4>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>3D Cartesian grid coordinates</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetIOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;grid::coordinates&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="symbase">
<h3>SymBase<a class="headerlink" href="#symbase" title="Permalink to this headline">¶</a></h3>
<p>Thorn SymBase provides a mechanism by which symmetry conditions can register routines that handle this mapping when a global interpolator is called.</p>
</div>
</div>
<div class="section" id="adaptive-mesh-refinement">
<h2>Adaptive Mesh Refinement<a class="headerlink" href="#adaptive-mesh-refinement" title="Permalink to this headline">¶</a></h2>
<p>It is often the case in simulations of physical systems that the most interesting phenomena may occur in only a subset of the computational domain. In the other regions of the domain it may be possible to use a less accurate approximation, thereby reducing the computational resources required, and still obtain results which are essentially similar to those obtained if no such reduction is made.</p>
<p>In particular, we may consider using a computational mesh which is non-uniform in space and time, using a finer mesh resolution in the “interesting” regions where we expect it to be necessary, and using a coarser resolution in other areas. This is what we mean by mesh refinement (MR).</p>
<div class="section" id="carpet">
<h3>Carpet<a class="headerlink" href="#carpet" title="Permalink to this headline">¶</a></h3>
<p>Carpet is a mesh refinement driver for Cactus. It knows about a hierarchy of refinement levels, where each level is decomposed into a set of cuboid grid patches. The grid patch is the smallest unit of grid points that Carpet deals with. Carpet parallelises by assigning sets of grid patches to processors.</p>
<p>Each grid patch can be divided in up to four zones: the interior, the outer boundary, and the ghost zone, and the refinement boundary. The interior is where the actual compuations go on. The outer boundary is where the users’ outer boundary condition is applied; from Carpet’s point of view, these two are the same. The ghost zones are boundaries to other grid patches on the same refinement level (that might live on a different processor). The refinement boundary is the boundary of the refined region in a level, and it is filled by prolongation (interpolation) from the next coarser level.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Carpet does not handle staggered grids. Carpet does not provide cell-centered refinement. Carpet always enables all storage.</p>
</div>
<div class="graphviz"><object data="../../_images/graphviz-36c35a131bfce564b5215b1efc2ac9bc133cd94c.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;Carpet&quot; -&gt; &quot;CarpetLib&quot;;
&quot;Carpet&quot; -&gt; &quot;IOUtil&quot;;
&quot;Carpet&quot; -&gt; &quot;MPI&quot;;
&quot;Carpet&quot; -&gt; &quot;Timers&quot;;
&quot;Carpet&quot; -&gt; &quot;LoopControl&quot;;
}</p></object></div>
<div class="section" id="id3">
<h4>Parameter<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Use the domain description from CoordBase to specify the global extent of the coarsest grid.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">domain_from_coordbase</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
<li><p>Use the domain description from MultiPatch</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">domain_from_multipatch</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
<li><p>Maximum number of refinement levels, including the base level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">max_refinement_levels</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Ghost zones in each spatial direction</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Grid patches that are on the same refinement level never overlap except with their ghost zones. Conversly, all ghost zones must overlap with a non-ghost zone of another grid patch of the same level.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">ghost_size</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">INFO (Carpet): Base grid specification for map 0:</span>
<span class="go">    number of coarse grid ghost points: [[3,3,3],[3,3,3]]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Fill past time levels from current time level after calling initial data routines.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The boundary values of the finer grids have to be calculated from the coarser grids through interpolation. An because the time steps on the finer grids are smaller, there is not always a corresponding value on the coarser grids available. This makes it necessary to interpolate in time between time steps on the coarser grids. three time levels allow for a second order interpolation in time.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">init_fill_timelevels</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">init_3_timelevels</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span> <span class="c1"># Set up 3 timelevels of initial data</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Carpet currently supports polynomial interpolation, up to quadratic interpolation in time, which requires keeping at least two previous time levels of data. It also supports up to quintic interpolation in space, which requires using at least three ghost zones.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">prolongation_order_space</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">prolongation_order_time</span>  <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Refinement factor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">refinement_factor</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Temporal refinement factors over the coarsest level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span><span class="p">::</span><span class="n">dxyz</span> <span class="o">=</span> <span class="mi">18</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">dtfac</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">max_refinement_levels</span>    <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">time_refinement_factors</span>  <span class="o">=</span> <span class="s2">&quot;[1,1,2,4,8,16,32]&quot;</span>
<span class="go">INFO (Time): Timestep set to 4.5 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 4.5 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 2.25 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 1.125 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 0.5625 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 0.28125 (courant_static)</span>
<span class="go">INFO (Time): Timestep set to 0.140625 (courant_static)</span>
</pre></div>
</div>
</li>
<li><p>Use buffer zones</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">use_buffer_zones</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="go">INFO (Carpet): Buffer zone counts (excluding ghosts):</span>
<span class="go">    [0]: [[0,0,0],[0,0,0]]</span>
<span class="go">    [1]: [[9,9,9],[9,9,9]]</span>
<span class="go">    [2]: [[9,9,9],[9,9,9]]</span>
<span class="go">    [3]: [[9,9,9],[9,9,9]]</span>
<span class="go">    [4]: [[9,9,9],[9,9,9]]</span>
<span class="go">    [5]: [[9,9,9],[9,9,9]]</span>
<span class="go">    [6]: [[9,9,9],[9,9,9]]</span>
</pre></div>
</div>
</li>
<li><p>Carpet uses vertex-centered refinement. That is, each coarse grid point coincides with a fine grid point.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">refinement_centering</span> <span class="o">=</span> <span class="s2">&quot;vertex&quot;</span>
</pre></div>
</div>
</li>
<li><p>Print detailed statistics periodically</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">output_timers_every</span> <span class="o">=</span> <span class="mi">512</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">schedule_barriers</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="c1"># Insert barriers between scheduled items, so that timer statistics become more reliable (slows down execution)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">sync_barriers</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="c1"># Insert barriers before and after syncs, so that the sync timer is more reliable (slows down execution)</span>
</pre></div>
</div>
</li>
<li><p>Try to catch uninitialised grid elements or changed timelevels.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Checksumming and poisoning are means to find thorns that alter grid variables that should not be altered, or that fail to fill in grid variables that they should fill in.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">check_for_poison</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">poison_new_timelevels</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetLib</span><span class="p">::</span><span class="n">poison_new_memory</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetLib</span><span class="p">::</span><span class="n">poison_value</span>      <span class="o">=</span> <span class="mi">114</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Base Multigrid level and factor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">convergence_level</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">convergence_factor</span> <span class="o">=</span> <span class="mi">2</span>
<span class="go">INFO (Carpet): Adapted domain specification for map 0:</span>
<span class="go">    convergence factor: 2</span>
<span class="go">    convergence level : 0</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id4">
<h4>Output<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>File name to output grid coordinates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">grid_coordinates_filename</span> <span class="o">=</span> <span class="s2">&quot;carpet-grid.asc&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id5">
<h4>Warning<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>INFO (Carpet): There are not enough time levels for the desired temporal prolongation order in the grid function group “ADMBASE::METRIC”.  With Carpet::prolongation_order_time=2, you need at least 3 time levels.</p></li>
</ul>
</div>
</div>
<div class="section" id="carpetlib">
<h3>CarpetLib<a class="headerlink" href="#carpetlib" title="Permalink to this headline">¶</a></h3>
<p>This thorn contains the backend library that provides mesh refinement. CarpetLib contains of three major parts:</p>
<ul>
<li><p>a set of generic useful helpers</p>
<blockquote>
<div><p>A class <code class="docutils literal notranslate"><span class="pre">vect&lt;T,D&gt;</span></code> provides small D-dimensional vectors of the type T. A vect corresponds to a grid point location. The class <code class="docutils literal notranslate"><span class="pre">bbox&lt;T,D&gt;</span></code> provides D-dimensional bounding boxes using type T as indices. A bbox defines the location and shape of a grid patch. Finally, <code class="docutils literal notranslate"><span class="pre">bboxset&lt;T,D&gt;</span></code> is a collection of bboxes.</p>
</div></blockquote>
</li>
<li><p>the grid hierarchy and data handling</p>
<blockquote>
<div><p>The grid hierarchy is described by a set of classes. Except for the actual data, all structures and all information is replicated on all processors.</p>
</div></blockquote>
</li>
<li><p>interpolation operators.</p>
<blockquote>
<div><p>The interpolators used for restriction and prolongation are different from those used for the generic interpolation interface in Cactus. The reason is that interpolation is expensive, and hence the interpolation operators used for restriction and prolongation have to be streamlined and optimised. As one knows the location of the sampling points for the interpolation, one can calculate the coefficients in advance, saving much time compared to calling a generic interpolation interface.</p>
</div></blockquote>
</li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-b27f0026debd58ef5c9596fbeea58ad4553dda6a.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetLib&quot; -&gt; &quot;Vectors&quot;;
&quot;CarpetLib&quot; -&gt; &quot;CycleClock&quot;;
&quot;CarpetLib&quot; -&gt; &quot;Timers&quot;;
&quot;CarpetLib&quot; -&gt; &quot;LoopControl&quot;;
}</p></object></div>
<div class="section" id="id6">
<h4>Parameter<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Provide one extra ghost point during restriction for staggered operators.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetLib</span><span class="p">::</span><span class="n">support_staggered_operators</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetregrid2">
<h3>CarpetRegrid2<a class="headerlink" href="#carpetregrid2" title="Permalink to this headline">¶</a></h3>
<p>Set up refined regions by specifying a set of centres and radii about them. All it does is take a regridding specification from the user and translate that into a <code class="docutils literal notranslate"><span class="pre">gh</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gh</span></code> is a grid hierarchy. It describes, for each refinement level, the location of the grid patches. This <code class="docutils literal notranslate"><span class="pre">gh</span></code> does not contain ghost zones or prolongation boundaries. There exists only one common <code class="docutils literal notranslate"><span class="pre">gh</span></code> for all grid functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dh</span></code> is a data hierarchy. It extends the notion of a <code class="docutils literal notranslate"><span class="pre">gh</span></code> by ghost zones and prolongation boundaries. The <code class="docutils literal notranslate"><span class="pre">dh</span></code> does most of the bookkeeping work, deciding which grid patches interact with what other grid patches through synchronisation, prolongation, restriction, and boundary prolongation. As all grid functions have the same number of ghost zones, there exists also only one <code class="docutils literal notranslate"><span class="pre">dh</span></code> for all grid functions.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To regrid means to select a new set of grid patches for each refinement level. To recompose the grid hierarchy means to move data around. Regridding is only about bookkeeping, while recomposing is about data munging.</p>
</div>
<div class="graphviz"><object data="../../_images/graphviz-e19ad9de556430c0ce15c7eaafee6e7c7afa4662.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetRegrid2&quot; -&gt; &quot;Carpet&quot;;
&quot;CarpetRegrid2&quot; -&gt; &quot;Timers&quot;;
}</p></object></div>
<div class="section" id="id7">
<h4>Parameter<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Set up refined regions by specifying a set of centres and radii about them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">max_refinement_levels</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">num_centres</span>    <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">num_levels_1</span>   <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">num_levels_2</span>   <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">position_x_1</span>   <span class="o">=</span> <span class="o">-</span><span class="mf">15.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">position_x_2</span>   <span class="o">=</span>  <span class="mf">15.2</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>    <span class="o">=</span>  <span class="mf">270.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>    <span class="o">=</span>  <span class="mf">162.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">94.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">40.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">27.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_1</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">13.5</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>    <span class="o">=</span>  <span class="mf">270.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>    <span class="o">=</span>  <span class="mf">162.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">94.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">40.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">27.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">radius_2</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>    <span class="o">=</span>   <span class="mf">13.5</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">refinement_factor</span> <span class="o">=</span> <span class="mi">2</span>
<span class="go">INFO (CarpetRegrid2): Centre 1 is at position [-15.2,0,0] with 7 levels</span>
<span class="go">INFO (CarpetRegrid2): Centre 2 is at position [15.2,0,0] with 7 levels</span>
<span class="go">INFO (Carpet): Grid structure (superregions, coordinates):</span>
<span class="go">    [0][0][0]   exterior: [-576.000000000000000,-576.000000000000000,-576.000000000000000] : [576.000000000000000,576.000000000000000,576.000000000000000] : [18.000000000000000,18.000000000000000,18.000000000000000]</span>
<span class="go">    [1][0][0]   exterior: [-369.000000000000000,-351.000000000000000,-351.000000000000000] : [369.000000000000000,351.000000000000000,351.000000000000000] : [9.000000000000000,9.000000000000000,9.000000000000000]</span>
<span class="go">    [2][0][0]   exterior: [-216.000000000000000,-202.500000000000000,-202.500000000000000] : [216.000000000000000,202.500000000000000,202.500000000000000] : [4.500000000000000,4.500000000000000,4.500000000000000]</span>
<span class="go">    [3][0][0]   exterior: [-130.500000000000000,-114.750000000000000,-114.750000000000000] : [130.500000000000000,114.750000000000000,114.750000000000000] : [2.250000000000000,2.250000000000000,2.250000000000000]</span>
<span class="go">    [4][0][0]   exterior: [-66.375000000000000,-50.625000000000000,-50.625000000000000] : [66.375000000000000,50.625000000000000,50.625000000000000] : [1.125000000000000,1.125000000000000,1.125000000000000]</span>
<span class="go">    [5][0][0]   exterior: [-47.250000000000000,-32.062500000000000,-32.062500000000000] : [47.250000000000000,32.062500000000000,32.062500000000000] : [0.562500000000000,0.562500000000000,0.562500000000000]</span>
<span class="go">    [6][0][0]   exterior: [-31.218750000000000,-16.031250000000000,-16.031250000000000] : [31.218750000000000,16.031250000000000,16.031250000000000] : [0.281250000000000,0.281250000000000,0.281250000000000]</span>
</pre></div>
</div>
</li>
<li><p>Regrid every n time steps</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">regrid_every</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 2**(max_refinement_levels - 2)</span>
</pre></div>
</div>
</li>
<li><p>Minimum movement to trigger a regridding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetRegrid2</span><span class="p">::</span><span class="n">movement_threshold_1</span> <span class="o">=</span> <span class="mf">0.10</span> <span class="c1"># Regrid only if the regions have changed sufficiently</span>
<span class="go">INFO (CarpetRegrid2): Refined regions have not changed sufficiently; skipping regridding</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id8">
<h4>Warning<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>PARAMETER ERROR (CarpetRegrid2): The number of requested refinement levels is larger than the maximum number of levels specified by Carpet::max_refinement_levels</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Carpet</span><span class="p">::</span><span class="n">max_refinement_levels</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="volumeintegrals-grmhd">
<h3>VolumeIntegrals_GRMHD<a class="headerlink" href="#volumeintegrals-grmhd" title="Permalink to this headline">¶</a></h3>
<p>Thorn for integration of spacetime quantities. The center of mass (CoM) can be used to set the AMR center.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\rho_{*} = \alpha u^{0} \sqrt{det(g)} \rho_{0} = \Gamma \sqrt{det(g)} \rho_{0} \\
CoM^{i} = \frac{\int \rho_{*} x^{i} dV}{\int \rho_{*} dV}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In a binary neutron star simulation, the maximum density is <span class="math notranslate nohighlight">\(\sim 1\)</span>, with atmosphere values surrounding the stars of at most <span class="math notranslate nohighlight">\(\sim\)</span> 1e-6. The concern is that a bad conservatives-to-primitives inversion called before this diagnostic might cause Gamma to be extremely large. Capping Gamma at 1e4 should prevent the CoM integral from being thrown off significantly, which would throw off the NS tracking.</p>
</div>
<div class="graphviz"><object data="../../_images/graphviz-e2d5b42f09a4dd4f53637063ab1d301c7c65be88.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;VolumeIntegrals_GRMHD&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;VolumeIntegrals_GRMHD&quot; -&gt; &quot;HydroBase&quot;;
&quot;VolumeIntegrals_GRMHD&quot; -&gt; &quot;ADMBase&quot;;
&quot;VolumeIntegrals_GRMHD&quot; -&gt; &quot;CarpetRegrid2&quot;;
}</p></object></div>
<div class="section" id="id9">
<h4>Parameter<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Set verbosity level: 1=useful info; 2=moderately annoying (though useful for debugging)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>How often to compute volume integrals?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">VolIntegral_out_every</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 2**(max_refinement_levels - 2)</span>
</pre></div>
</div>
</li>
<li><p>Number of volume integrals to perform</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">NumIntegrals</span> <span class="o">=</span> <span class="mi">6</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Integrate the entire volume with an integrand of 1. (used for testing/validation purposes only).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;one&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># To compute the center of mass in an integration volume originally centered at (x,y,z) = (-15.2,0,0) with a coordinate radius of 13.5. Also use the center of mass integral result to set the ZEROTH AMR center.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;centerofmass&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_sphere__center_x_initial</span>         <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">15.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_inside_sphere__radius</span>            <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">13.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">amr_centre__tracks__volintegral_inside_sphere</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">0</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Same as above, except use the integrand=1 (for validation purposes, to ensure the integration volume is approximately 4/3*pi*13.5^3).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;one&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_sphere__center_x_initial</span>         <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">15.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_inside_sphere__radius</span>            <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">13.5</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The neutron star originally centered at (x,y,z) = (+15.2,0,0). Also use the center of mass integral result to set the ONETH AMR center.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;centerofmass&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_sphere__center_x_initial</span>         <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">15.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_inside_sphere__radius</span>            <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">13.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">amr_centre__tracks__volintegral_inside_sphere</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Same as above, except use the integrand=1 (for validation purposes, to ensure the integration volume is approximately 4/3*pi*13.5^3).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;one&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_sphere__center_x_initial</span>         <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">15.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">volintegral_inside_sphere__radius</span>            <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">13.5</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform rest-mass integrals over entire volume.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">Integration_quantity_keyword</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;restmass&quot;</span>
</pre></div>
</div>
</li>
<li><p>Enable output file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">enable_file_output</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">outVolIntegral_dir</span> <span class="o">=</span> <span class="s2">&quot;volume_integration&quot;</span>
</pre></div>
</div>
</li>
<li><p>Gamma speed limit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VolumeIntegrals_GRMHD</span><span class="p">::</span><span class="n">CoM_integrand_GAMMA_SPEED_LIMIT</span> <span class="o">=</span> <span class="mf">1e4</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpettracker">
<h3>CarpetTracker<a class="headerlink" href="#carpettracker" title="Permalink to this headline">¶</a></h3>
<p>Object coordinates are updated by CarpetTracker, which provides a simple interface to the object trackers PunctureTracker and NSTracker in order to have the refined region follow the moving objects.</p>
<div class="graphviz"><object data="../../_images/graphviz-f03459404c39daa1cdbc882d0146f43fc462f9ab.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetTracker&quot; -&gt; &quot;SphericalSurface&quot;;
&quot;CarpetTracker&quot; -&gt; &quot;CarpetRegrid2&quot;;
}</p></object></div>
<div class="section" id="id10">
<h4>Parameter<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Spherical surface index or name which is the source for the location of the refine regions. (Maximum number of tracked surfaces less than 10)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetTracker</span><span class="p">::</span><span class="n">surface</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="go">&lt;surface index&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetTracker</span><span class="p">::</span><span class="n">surface_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Righthand NS&quot;</span>
<span class="go">&lt;surface name&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="nstracker">
<h3>NSTracker<a class="headerlink" href="#nstracker" title="Permalink to this headline">¶</a></h3>
<p>This thorn can track the location of a neutron star, e.g. to
guide mesh refinement.</p>
<div class="graphviz"><object data="../../_images/graphviz-d1e466a0d497ca210e81c6483be83170a06414e9.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;NSTracker&quot; -&gt; &quot;SphericalSurface&quot;;
&quot;NSTracker&quot; -&gt; &quot;Hydro_Analysis&quot;;
}</p></object></div>
<div class="section" id="id11">
<h4>Parameter<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Index or Name of the sperical surface which should be moved around</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_SF_Name</span>          <span class="o">=</span> <span class="s2">&quot;Righthand NS&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_SF_Name_Opposite</span> <span class="o">=</span> <span class="s2">&quot;Lefthand NS&quot;</span>
<span class="go">&lt;surface name&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_SF_Index</span>          <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_SF_Index_Opposite</span> <span class="o">=</span> <span class="mi">1</span>
<span class="go">&lt;surface index&gt;</span>
</pre></div>
</div>
</li>
<li><p>Allowed to move if new location is not too far from old.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_max_distance</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
<li><p>grid scalar group containing coordinates of center of star</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_tracked_location</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis::Hydro_Analysis_rho_max_loc&quot;</span> <span class="c1"># location of maximum</span>
<span class="go">position_x[NSTracker_SF_Index] = Hydro_Analysis_rho_max_loc</span>
<span class="go">position_x[NSTracker_SF_Index_Opposite] = - Hydro_Analysis_rho_max_loc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_tracked_location</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis::Hydro_Analysis_rho_core_center_volume_weighted&quot;</span> <span class="c1"># center of mass</span>
</pre></div>
</div>
</li>
<li><p>Time after which to stop updating the SF</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NSTracker</span><span class="p">::</span><span class="n">NSTracker_stop_time</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="hydro-analysis">
<h3>Hydro_Analysis<a class="headerlink" href="#hydro-analysis" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides basic hydro analysis routines.</p>
<div class="graphviz"><object data="../../_images/graphviz-dc579193753e7a6bdd130d3ce9b2c521783f1018.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;Hydro_Analysis&quot; -&gt; &quot;HydroBase&quot;;
&quot;Hydro_Analysis&quot; -&gt; &quot;ADMBase&quot;;
&quot;Hydro_Analysis&quot; -&gt; &quot;CartGrid3D&quot;;
}</p></object></div>
<div class="section" id="id12">
<h4>Parameter<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Look for the value and location of the maximum of rho</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_comp_rho_max</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_average_multiple_maxima_locations</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="c1"># when finding more than one global maximum location, average position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_comp_rho_max_every</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 2**(max_refinement_levels - 2)</span>
</pre></div>
</div>
</li>
<li><p>Look for the location of the volume-weighted center of mass</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_comp_vol_weighted_center_of_mass</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
<li><p>Look for the proper distance between the maximum of the density and the origin (along a straight coordinate line, not a geodesic)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_comp_rho_max_origin_distance</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;AEILocalInterp&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Hydro_Analysis</span><span class="p">::</span><span class="n">Hydro_Analysis_interpolator_name</span> <span class="o">=</span> <span class="s2">&quot;Lagrange polynomial interpolation (tensor product)&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id13">
<h4>Output<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Coordinate location of the maximum of rho</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis_rho_max&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis::Hydro_Analysis_rho_max_loc&quot;</span>
</pre></div>
</div>
</li>
<li><p>coordinate location of the volume weightes center of mass</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis_rho_center_volume_weighted&quot;</span>
</pre></div>
</div>
</li>
<li><p>proper distance between the maximum of the density and the origin (along a straight coordinate line)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;Hydro_Analysis::Hydro_Analysis_rho_max_origin_distance&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id14">
<h4>Warning<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Cannot get handle for interpolation ! Forgot to activate an implementation providing interpolation operators (e.g. LocalInterp)?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;LocalInterp&quot;</span>
</pre></div>
</div>
</li>
<li><p>No driver thorn activated to provide an interpolation routine for grid arrays</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;CarpetInterp&quot;</span>
</pre></div>
</div>
</li>
<li><p>No handle found for interpolation operator ‘Lagrange polynomial interpolation (tensor product)’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;AEILocalInterp&quot;</span>
</pre></div>
</div>
</li>
<li><p>No handle: ‘-2’ found for reduction operator ‘sum’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;LocalReduce&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="puncturetracker">
<h3>PunctureTracker<a class="headerlink" href="#puncturetracker" title="Permalink to this headline">¶</a></h3>
<p>PunctureTracker track BH positions evolved with moving puncture techniques. The BH position is stored as the centroid of a spherical surface (even though there is no surface) provided by SphericalSurface.</p>
<div class="math notranslate nohighlight">
\[pt\_loc = pt\_loc\_p - dt \times pt\_beta\]</div>
<div class="graphviz"><object data="../../_images/graphviz-09b08ff2eaa3ed22647416eeb9232b3d8f3d4133.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;PunctureTracker&quot; -&gt; &quot;SphericalSurface&quot;;
&quot;PunctureTracker&quot; -&gt; &quot;CarpetRegrid2&quot;;
&quot;PunctureTracker&quot; -&gt; &quot;ADMBase&quot;;
}</p></object></div>
<div class="section" id="id15">
<h4>Parameter<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>A spherical surface index where we can store the puncture location</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">which_surface_to_store_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">track</span>                      <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">yes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">initial_x</span>                  <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">which_surface_to_store_info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">track</span>                      <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">yes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PunctureTracker</span><span class="p">::</span><span class="n">initial_x</span>                  <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id16">
<h4>Warning<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>No handle found for interpolation operator ‘Lagrange polynomial interpolation’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;AEILocalInterp&quot;</span>
</pre></div>
</div>
</li>
<li><p>Error</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;SphericalSurface&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">nsurfaces</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">maxntheta</span> <span class="o">=</span> <span class="mi">66</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">maxnphi</span>   <span class="o">=</span> <span class="mi">124</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">verbose</span>   <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id17">
<h4>Output<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Location of punctures</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out0D_vars</span> <span class="o">=</span> <span class="s2">&quot;PunctureTracker::pt_loc&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetinterp-carpetinterp2">
<h3>CarpetInterp/CarpetInterp2<a class="headerlink" href="#carpetinterp-carpetinterp2" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides a parallel interpolator for Carpet.</p>
<div class="graphviz"><object data="../../_images/graphviz-0bd55369b1399eeea4d39103f1569f2ce6066861.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetInterp2&quot; -&gt; &quot;Carpet&quot;;
&quot;CarpetInterp2&quot; -&gt; &quot;Timers&quot;;
}</p></object></div>
</div>
<div class="section" id="carpetreduce">
<h3>CarpetReduce<a class="headerlink" href="#carpetreduce" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides parallel reduction operators for Carpet. This thorn now uses a weight function. The weight is 1 for all “normal” grid points.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The weight is set to 0 on symmetry and possible the outer boundary, and it might be set to <span class="math notranslate nohighlight">\(1/2\)</span> on the edge of the boundary. The weight is also reduced or set to 0 on coarser grids that are overlaid by finer grid.</p>
</div>
<div class="graphviz"><object data="../../_images/graphviz-e168a34f480e9555d3228ff3193e1be5759bcd12.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetReduce&quot; -&gt; &quot;Carpet&quot;;
&quot;CarpetReduce&quot; -&gt; &quot;LoopControl&quot;;
}</p></object></div>
</div>
<div class="section" id="carpetmask">
<h3>CarpetMask<a class="headerlink" href="#carpetmask" title="Permalink to this headline">¶</a></h3>
<p>Remove unwanted regions from Carpet’s reduction operations. This can be used to excise the interior of horizons.</p>
<div class="graphviz"><object data="../../_images/graphviz-c1f77539893ebd97979793eaefa25ee58a343ddb.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;CarpetMask&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;CarpetMask&quot; -&gt; &quot;SphericalSurface&quot;;
}</p></object></div>
<div class="section" id="id18">
<h4>Parameter<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Exclude spherical surfaces with shrink factor</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>iweight = 0 if dr &lt;= radius_{sf} * excluded_surface_factor</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetMask</span><span class="p">::</span><span class="n">excluded_surface</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># index of excluded surface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetMask</span><span class="p">::</span><span class="n">excluded_surface_factor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="initial-data">
<h2>Initial Data<a class="headerlink" href="#initial-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="initbase">
<h3>InitBase<a class="headerlink" href="#initbase" title="Permalink to this headline">¶</a></h3>
<p>Thorn InitBase specifies how initial data are to be set up.</p>
<div class="section" id="id19">
<h4>Parameter<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Procedure for setting up initial data [“init_some_levels”, “init_single_level”, “init_two_levels”, “init_all_levels”]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">InitBase</span><span class="p">::</span><span class="n">initial_data_setup_method</span> <span class="o">=</span> <span class="s2">&quot;init_all_levels&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="admbase">
<h3>ADMBase<a class="headerlink" href="#admbase" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides the basic variables used to communicate between thorns doing General Relativity in the 3+1 formalism.</p>
<ul class="simple">
<li><p>alp</p></li>
<li><p>betax betay betaz</p></li>
<li><p>dtalp</p></li>
<li><p>dtbetax dtbetay dtbetaz</p></li>
<li><p>gxx gyy gzz gxy gxz gyz</p></li>
<li><p>kxx kyy kzz kxy kxz kyz</p></li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-e9c734dc4bb3586171cc6ac89ea161e0b64d69d5.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;ADMBase&quot; -&gt; &quot;CartGrid3D&quot;;
}</p></object></div>
<div class="section" id="id20">
<h4>Parameter<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Initial data value</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_data</span>    <span class="o">=</span> <span class="s2">&quot;Meudon_Bin_NS&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_lapse</span>   <span class="o">=</span> <span class="s2">&quot;Meudon_Bin_NS&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_shift</span>   <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtlapse</span> <span class="o">=</span> <span class="s2">&quot;Meudon_Bin_NS&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtshift</span> <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
</pre></div>
</div>
</li>
<li><p>evolution method</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">evolution_method</span>         <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">lapse_evolution_method</span>   <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">shift_evolution_method</span>   <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">dtlapse_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">dtshift_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
</pre></div>
</div>
</li>
<li><p>Number of time levels</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">lapse_timelevels</span>  <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">shift_timelevels</span>  <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">metric_timelevels</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id21">
<h4>Output<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>ADM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetIOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::curv</span>
<span class="gp">&gt;&gt;&gt; </span>                            <span class="n">ADMBase</span><span class="p">::</span><span class="n">lapse</span>
<span class="gp">&gt;&gt;&gt; </span>                            <span class="n">ADMBase</span><span class="p">::</span><span class="n">metric</span>
<span class="gp">&gt;&gt;&gt; </span>                            <span class="n">ADMBase</span><span class="p">::</span><span class="n">shift</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id22">
<h4>Warning<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The variable “ADMBASE::alp” has only 1 active time levels, which is not enough for boundary prolongation of order 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">lapse_timelevels</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">shift_timelevels</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">metric_timelevels</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="staticconformal">
<h3>StaticConformal<a class="headerlink" href="#staticconformal" title="Permalink to this headline">¶</a></h3>
<p>StaticConformal provides aliased functions to convert between physical and conformal 3-metric values.</p>
<ul class="simple">
<li><p>psi: Conformal factor</p></li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-b7aac6c92ae6bea5e3d2f43e049a33a137b68531.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;StaticConformal&quot; -&gt; &quot;CartGrid3D&quot;;
}</p></object></div>
<div class="section" id="id23">
<h4>Parameter<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Metric is conformal with static conformal factor, extrinsic curvature is physical</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">metric_type</span> <span class="o">=</span> <span class="s2">&quot;static conformal&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="hydrobase">
<h3>HydroBase<a class="headerlink" href="#hydrobase" title="Permalink to this headline">¶</a></h3>
<p>HydroBase defines the primitive variables</p>
<ul class="simple">
<li><p>rho: rest mass density <span class="math notranslate nohighlight">\(\rho\)</span></p></li>
<li><p>press: pressure <span class="math notranslate nohighlight">\(P\)</span></p></li>
<li><p>eps: internal energy density <span class="math notranslate nohighlight">\(\epsilon\)</span></p></li>
<li><p>vel[3]: contravariant fluid three velocity <span class="math notranslate nohighlight">\(v^{i}\)</span></p></li>
<li><p>w_lorentz: Lorentz Factor <span class="math notranslate nohighlight">\(W\)</span></p></li>
<li><p>Y_e: electron fraction <span class="math notranslate nohighlight">\(Y_e\)</span></p></li>
<li><p>Abar: Average atomic mass</p></li>
<li><p>temperature: temperature <span class="math notranslate nohighlight">\(T\)</span></p></li>
<li><p>entropy: specific entropy per particle <span class="math notranslate nohighlight">\(s\)</span></p></li>
<li><p>Bvec[3]: contravariant magnetic field vector defined as</p></li>
<li><p>Avec[3]: Vector potential</p></li>
<li><p>Aphi: Electric potential for Lorentz Gauge</p></li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-77e58ed25f9e5ceba56473e45dd8fc13706e9d7b.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;HydroBase&quot; -&gt; &quot;InitBase&quot;;
&quot;HydroBase&quot; -&gt; &quot;IOUtil&quot;;
}</p></object></div>
<div class="section" id="id24">
<h4>Parameter<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Number of time levels in evolution scheme</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">InitBase</span><span class="p">::</span><span class="n">initial_data_setup_method</span> <span class="o">=</span> <span class="s2">&quot;init_all_levels&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">timelevels</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">rho[i] = 0.0;</span>
<span class="go">rho_p[i] = 0.0;</span>
<span class="go">rho_p_p[i] = 0.0;</span>
</pre></div>
</div>
</li>
<li><p>The hydro initial value and evolution method (rho, vel, w_lorentz, eps)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_hydro</span> <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
</li>
<li><p>Other initial value and Evolution method</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_Avec</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_Aphi</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_Bvec</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">Bvec_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_temperature</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">temperature_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_entropy</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">entropy_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_Abar</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">Abar_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">initial_Y_e</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HydroBase</span><span class="p">::</span><span class="n">Y_e_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="tmunubase">
<h3>TmunuBase<a class="headerlink" href="#tmunubase" title="Permalink to this headline">¶</a></h3>
<p>Provide grid functions for the stress-energy tensor</p>
<div class="math notranslate nohighlight">
\[\begin{split}T_{a b} = \left(\begin{array}{llll}eTtt &amp; eTtx &amp; eTty &amp; eTtz \\  &amp; eTxx &amp; eTxy &amp; eTxz \\ &amp; &amp; eTyy &amp; eTyz \\ &amp;&amp;&amp; eTzz \end{array}\right)\end{split}\]</div>
<div class="graphviz"><object data="../../_images/graphviz-597342496793585666bc96116b181d93e6d0e81b.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;TmunuBase&quot; -&gt; &quot;ADMBase&quot;;
&quot;TmunuBase&quot; -&gt; &quot;StaticConformal&quot;;
&quot;TmunuBase&quot; -&gt; &quot;ADMCoupling&quot;;
}</p></object></div>
<div class="section" id="id25">
<h4>Parameter<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Should the stress-energy tensor have storage?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TmunuBase</span><span class="p">::</span><span class="n">stress_energy_storage</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
<li><p>Should the stress-energy tensor be calculated for the RHS evaluation?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TmunuBase</span><span class="p">::</span><span class="n">stress_energy_at_RHS</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
<li><p>Number of time levels</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TmunuBase</span><span class="p">::</span><span class="n">timelevels</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="meudon-bin-ns">
<h3>Meudon_Bin_NS<a class="headerlink" href="#meudon-bin-ns" title="Permalink to this headline">¶</a></h3>
<p>Import LORENE Bin_NS binary neutron star initial data.</p>
<div class="section" id="id26">
<h4>Parameter<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Input file name containing LORENE data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Meudon_Bin_NS</span><span class="p">::</span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;resu.d&quot;</span>
</pre></div>
</div>
</li>
<li><p>Initial data EOS identifyer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Meudon_Bin_NS</span><span class="p">::</span><span class="n">filename</span> <span class="o">=</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Meudon_Bin_NS</span><span class="p">::</span><span class="n">eos_table</span> <span class="o">=</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="seed-magnetic-fields">
<h3>Seed_Magnetic_Fields<a class="headerlink" href="#seed-magnetic-fields" title="Permalink to this headline">¶</a></h3>
<p>Since the LORENE code cannot yet compute magnetized BNS models.</p>
<p>The following sets up a vector potential of the form</p>
<div class="math notranslate nohighlight">
\[A_\phi = \varpi^2 A_b max[(X-X_{cut}), 0],\]</div>
<p>where <span class="math notranslate nohighlight">\(\varpi\)</span> is the cylindrical radius: <span class="math notranslate nohighlight">\(\sqrt{x^2+y^2}\)</span>, and <span class="math notranslate nohighlight">\(X \in \{\rho, P\}\)</span> is the variable P or <span class="math notranslate nohighlight">\(\rho\)</span> specifying whether the vector potential is proportional to P or <span class="math notranslate nohighlight">\(\rho\)</span> in the region greater than the cutoff.</p>
<p>This formulation assumes that <span class="math notranslate nohighlight">\(A_r\)</span> and <span class="math notranslate nohighlight">\(A_\theta = 0\)</span>; only <span class="math notranslate nohighlight">\(A_\phi\)</span> can be nonzero. Thus the coordinate transformations are as follows:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
A_x &amp;= - \frac{y}{\varpi^2} A_\phi \\
A_y &amp;= \frac{x}{\varpi^2} A_\phi
\end{aligned}\end{split}\]</div>
<div class="graphviz"><object data="../../_images/graphviz-9de2d47d819da5ba1c3b625c72e19204f96fea53.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;seed_magnetic_fields&quot; -&gt; &quot;CartGrid3D&quot;
&quot;seed_magnetic_fields&quot; -&gt; &quot;ADMBase&quot;;
&quot;seed_magnetic_fields&quot; -&gt; &quot;HydroBase&quot;;
}</p></object></div>
<div class="section" id="id27">
<h4>Parameter<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>A-field prescription [“Pressure_prescription”, “Density_prescription”]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">Afield_type</span> <span class="o">=</span> <span class="s2">&quot;Pressure_prescription&quot;</span>
</pre></div>
</div>
</li>
<li><p>Multiply <span class="math notranslate nohighlight">\(A_\phi\)</span> by <span class="math notranslate nohighlight">\(\varpi^2\)</span>?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">enable_varpi_squared_multiplication</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
<li><p>Magnetic field strength parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">A_b</span> <span class="o">=</span> <span class="mf">1e-3</span>
</pre></div>
</div>
</li>
<li><p>Cutoff pressure, below which vector potential is set to zero. Typically set to 4% of the maximum initial pressure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">P_cut</span> <span class="o">=</span> <span class="mf">1e-5</span>
</pre></div>
</div>
</li>
<li><p>Magnetic field strength pressure exponent <span class="math notranslate nohighlight">\(A_\phi = \varpi^2 A_b max[(P - P_{cut})^{n_s}, 0]\)</span>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">n_s</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Cutoff density, below which vector potential is set to zero. Typically set to 20% of the maximum initial density.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">rho_cut</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># If max density = 1.0</span>
</pre></div>
</div>
</li>
<li><p>Define A fields on an IllinoisGRMHD staggered grid?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields</span><span class="p">::</span><span class="n">enable_IllinoisGRMHD_staggered_A_fields</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="seed-magnetic-fields-bns">
<h3>Seed_Magnetic_Fields_BNS<a class="headerlink" href="#seed-magnetic-fields-bns" title="Permalink to this headline">¶</a></h3>
<p>Thorn <cite>Seed_Magnetic_Fields</cite> set seeds magnetic fields within a single star. This thorn simply extends the capability to two stars, centered at <span class="math notranslate nohighlight">\((x_{1},0,0)\)</span> and <span class="math notranslate nohighlight">\((x_{2},0,0)\)</span> (LORENE sets up the neutron stars along the x-axis by default).</p>
<div class="math notranslate nohighlight">
\[A_\phi = \varpi^2 A_b max[(P-P_{cut})^{n_s}, 0],\]</div>
<div class="graphviz"><object data="../../_images/graphviz-75b8c935b0aff370ff28a8ec8c2a9d610a8bcdc9.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;Seed_Magnetic_Fields_BNS&quot; -&gt; &quot;CartGrid3D&quot;
&quot;Seed_Magnetic_Fields_BNS&quot; -&gt; &quot;ADMBase&quot;;
&quot;Seed_Magnetic_Fields_BNS&quot; -&gt; &quot;HydroBase&quot;;
}</p></object></div>
<div class="section" id="id28">
<h4>Parameter<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Magnetic field strength parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">A_b</span> <span class="o">=</span> <span class="mf">1e-3</span>
</pre></div>
</div>
</li>
<li><p>Cutoff pressure, below which vector potential is set to zero. Typically set to 4% of the maximum initial pressure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">P_cut</span> <span class="o">=</span> <span class="mf">1e-5</span>
</pre></div>
</div>
</li>
<li><p>Magnetic field strength pressure exponent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">n_s</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Define A fields on an IllinoisGRMHD staggered grid?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">enable_IllinoisGRMHD_staggered_A_fields</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
</pre></div>
</div>
</li>
<li><p>Which field structure to use [“poloidal_A_interior”, “dipolar_A_everywhere”]:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">enable_IllinoisGRMHD_staggered_A_fields</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="c1"># This requires a staggered grid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">A_field_type</span> <span class="o">=</span> <span class="s2">&quot;poloidal_A_interior&quot;</span> <span class="c1"># interior to the star</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">x_c1</span> <span class="o">=</span> <span class="o">-</span><span class="mf">15.2</span> <span class="c1"># x coordinate of NS1 center</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">x_c2</span> <span class="o">=</span> <span class="mf">15.2</span> <span class="c1"># x coordinate of NS2 center</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_NS1</span> <span class="o">=</span> <span class="mf">13.5</span> <span class="c1"># Radius of NS1. Does not have to be perfect, but must not overlap other star.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_NS2</span> <span class="o">=</span> <span class="mf">13.5</span> <span class="c1"># Radius of NS2</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[A_\phi = \varpi^2 A_b max[(P-P_{cut})^{n_s}, 0]\]</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">enable_IllinoisGRMHD_staggered_A_fields</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="c1"># This requires a staggered grid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">A_field_type</span> <span class="o">=</span> <span class="s2">&quot;dipolar_A_everywhere&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">x_c1</span> <span class="o">=</span> <span class="o">-</span><span class="mf">15.2</span> <span class="c1"># x coordinate of NS1 center</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">x_c2</span> <span class="o">=</span> <span class="mf">15.2</span> <span class="c1"># x coordinate of NS2 center</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_NS1</span> <span class="o">=</span> <span class="mf">13.5</span> <span class="c1"># Radius of NS1. Does not have to be perfect, but must not overlap other star.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_NS2</span> <span class="o">=</span> <span class="mf">13.5</span> <span class="c1"># Radius of NS2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_zero_NS1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c1"># Current loop radius</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">r_zero_NS2</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">I_zero_NS1</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># Magnetic field loop current of NS1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Seed_Magnetic_Fields_BNS</span><span class="p">::</span><span class="n">I_zero_NS2</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[A_{\phi}=\frac{\pi r_{0}^{2} I_{0}}{\left(r_{0}^{2}+r^{2}\right)^{3 / 2}}\left(1+\frac{15 r_{0}^{2}\left(r_{0}^{2}+\varpi^{2}\right)}{8\left(r_{0}^{2}+r^{2}\right)^{2}}\right)\]</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="twopunctures">
<h3>TwoPunctures<a class="headerlink" href="#twopunctures" title="Permalink to this headline">¶</a></h3>
<p>Create initial for two puncture black holes using a single domain spectral method.</p>
<p>Following York’s conformal-transverse-traceless decomposition method, we make the following assumptions for the metric and the extrinsic curvature</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned} \gamma_{i j} &amp;=\psi^{4} \delta_{i j} \\ K_{i j} &amp;=\psi^{-2}\left(V_{j, i}+V_{i, j}-\frac{2}{3} \delta_{i j} \operatorname{div} \boldsymbol{V}\right) \end{aligned}\end{split}\]</div>
<p>The initial data described by this method are conformally flat and maximally sliced, <span class="math notranslate nohighlight">\(K = 0\)</span>. With this ansatz the Hamiltonian constraint yields an equation for the conformal factor <span class="math notranslate nohighlight">\(\psi\)</span></p>
<div class="math notranslate nohighlight">
\[\triangle \psi+\frac{1}{8} \psi^{5} K_{i j} K^{i j}=0\]</div>
<p>while the momentum constraint yields an equation for the vector potential <span class="math notranslate nohighlight">\(\boldsymbol{V}\)</span></p>
<div class="math notranslate nohighlight">
\[\triangle \boldsymbol{V}+\frac{1}{3} \operatorname{grad}(\operatorname{div} \boldsymbol{V})=0\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TwoPunctures Thorn is restricted to problems involving two punctures.</p>
</div>
<p>One can proceed by choosing a non-trivial analytic solution of the Bowen-York type for the momentum constraint,</p>
<div class="math notranslate nohighlight">
\[\boldsymbol{V}=\sum_{n=1}^{2}\left(-\frac{7}{4\left|\boldsymbol{x}_{n}\right|} \boldsymbol{P}_{n}-\frac{\boldsymbol{x}_{n} \cdot \boldsymbol{P}_{n}}{4\left|\boldsymbol{x}_{n}\right|^{3}} \boldsymbol{x}_{n}+\frac{1}{\left|\boldsymbol{x}_{n}\right|^{3}} \boldsymbol{x}_{n} \times \boldsymbol{S}_{n}\right)\]</div>
<p>Hamiltonian constraint is obtained by writing the conformal factor <span class="math notranslate nohighlight">\(\psi\)</span> as a sum of a singular term and a finite correction <span class="math notranslate nohighlight">\(u\)</span></p>
<div class="math notranslate nohighlight">
\[\psi=1+\sum_{n=1}^{2} \frac{m_{n}}{2\left|\boldsymbol{x}_{n}\right|}+u\]</div>
<p>It is impossible to unambiguously define local black hole masses in general. In the following we choose the ADM mass</p>
<div class="math notranslate nohighlight">
\[M_{\pm}^{A D M}=\left(1+u_{\pm}\right) m_{\pm}+\frac{m_{+} m_{-}}{2 D}\]</div>
<p>Here <span class="math notranslate nohighlight">\(m_{+}\)</span> and <span class="math notranslate nohighlight">\(m_{-}\)</span> are the values of <span class="math notranslate nohighlight">\(u\)</span> at each puncture.</p>
<div class="graphviz"><object data="../../_images/graphviz-03d01b435ecf4c11e94c8e54171b985fa9ea20b5.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;TwoPunctures&quot; -&gt; &quot;ADMBase&quot;;
&quot;TwoPunctures&quot; -&gt; &quot;StaticConformal&quot;;
}</p></object></div>
<div class="section" id="id29">
<h4>Parameter<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>initial_data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_data</span>  <span class="o">=</span> <span class="s2">&quot;twopunctures&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_lapse</span> <span class="o">=</span> <span class="s2">&quot;twopunctures-averaged&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_shift</span>   <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtlapse</span> <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtshift</span> <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
</pre></div>
</div>
</li>
<li><p>Coordinate of the puncture</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_b</span>            <span class="o">=</span> <span class="mf">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">center_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.538461538462</span>
</pre></div>
</div>
</li>
<li><p>ADM mass of Black holes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">target_M_plus</span>  <span class="o">=</span> <span class="mf">0.553846153846</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">target_M_minus</span> <span class="o">=</span> <span class="mf">0.446153846154</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">adm_tol</span> <span class="o">=</span> <span class="mf">1.0e-10</span>
<span class="go">INFO (TwoPunctures): Attempting to find bare masses.</span>
<span class="go">INFO (TwoPunctures): Target ADM masses: M_p=0.553846 and M_m=0.446154</span>
<span class="go">INFO (TwoPunctures): ADM mass tolerance: 1e-10</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=1, mm=1</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=0.500426421474965, M_m_err=0.607857653302066</span>
<span class="go">. . .</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=0.518419372531011, mm=0.391923877275946</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=2.35933494963092e-12, M_m_err=8.5276896655273e-11</span>
<span class="go">INFO (TwoPunctures): Found bare masses.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">target_M_plus</span>  <span class="o">=</span> <span class="mf">0.553846153846</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">target_M_minus</span> <span class="o">=</span> <span class="mf">0.446153846154</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_m_plus</span>  <span class="o">=</span> <span class="mf">0.553846153846</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_m_minus</span> <span class="o">=</span> <span class="mf">0.446153846154</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">adm_tol</span> <span class="o">=</span> <span class="mf">1.0e-10</span>
<span class="go">INFO (TwoPunctures): Attempting to find bare masses.</span>
<span class="go">INFO (TwoPunctures): Target ADM masses: M_p=0.553846 and M_m=0.446154</span>
<span class="go">INFO (TwoPunctures): ADM mass tolerance: 1e-10</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=0.553846153846, mm=0.446153846154</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=0.0334459078036595, M_m_err=0.0445419016377125</span>
<span class="go">. . .</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=0.518419372531011, mm=0.391923877275946</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=2.35933494963092e-12, M_m_err=8.5276896655273e-11</span>
<span class="go">INFO (TwoPunctures): Found bare masses.</span>
</pre></div>
</div>
</li>
<li><p>momentum of the puncture</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_P_plus</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="mf">0.3331917498</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_P_minus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.3331917498</span>
</pre></div>
</div>
</li>
<li><p>spin of the puncture</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_S_plus</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">par_S_minus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
</li>
<li><p>A small number to smooth out singularities at the puncture locations</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">TP_epsilon</span> <span class="o">=</span> <span class="mf">1e-6</span>
</pre></div>
</div>
</li>
<li><p>Tiny number to avoid nans near or at the pucture locations</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">TP_Tiny</span>    <span class="o">=</span> <span class="mf">1.0e-2</span>
</pre></div>
</div>
</li>
<li><p>Print screen output while solving</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">yes</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=0.553846153846, mm=0.446153846154</span>
<span class="go">Newton: it=0         |F|=7.738745e-02</span>
<span class="go">bare mass: mp=0.553846       mm=0.446154</span>
<span class="go">bicgstab:  itmax 100, tol 7.738745e-05</span>
<span class="go">bicgstab:     0   6.428e-01</span>
<span class="go">bicgstab:     1   1.010e+00   1.021e+00   0.000e+00   6.116e-01</span>
<span class="go">bicgstab:     2   7.551e-02   1.622e+00   1.531e-02   4.085e-01</span>
<span class="go">bicgstab:     3   1.561e-02   2.836e-01   2.396e-02   8.846e-01</span>
<span class="go">bicgstab:     4   7.358e-03   2.473e-01  -1.079e-01   9.778e-01</span>
<span class="go">bicgstab:     5   3.429e-04   9.104e+00  -7.954e-01   4.003e-01</span>
<span class="go">bicgstab:     6   6.564e-05   3.724e-01  -4.164e-01   1.293e+00</span>
<span class="go">Newton: it=1         |F|=1.149396e-03</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=0.0334459078036595, M_m_err=0.0445419016377125</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TwoPunctures</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">no</span>
<span class="go">INFO (TwoPunctures): Bare masses: mp=0.553846153846, mm=0.446153846154</span>
<span class="go">INFO (TwoPunctures): ADM mass error: M_p_err=0.0334459078036595, M_m_err=0.0445419016377125</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="tovsolver">
<h3>TOVSolver<a class="headerlink" href="#tovsolver" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides initial data for TOV star(s) in isotropic coordinates. The Tolman-Oppenheimer-Volkoff solution is a static perfect fluid “star”.</p>
<div class="graphviz"><object data="../../_images/graphviz-fc1947be2463a3b1afa66c12f99dd34caf60a4c2.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;TOVSolver&quot; -&gt; &quot;ADMBase&quot;;
&quot;TOVSolver&quot; -&gt; &quot;HydroBase&quot;;
&quot;TOVSolver&quot; -&gt; &quot;Constants&quot;;
&quot;TOVSolver&quot; -&gt; &quot;StaticConformal&quot;;
}</p></object></div>
<div class="section" id="id30">
<h4>Parameter<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>TOV star initial data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_data</span>            <span class="o">=</span> <span class="s2">&quot;tov&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_lapse</span>           <span class="o">=</span> <span class="s2">&quot;tov&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_shift</span>           <span class="o">=</span> <span class="s2">&quot;tov&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtlapse</span>         <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">initial_dtshift</span>         <span class="o">=</span> <span class="s2">&quot;zero&quot;</span>
</pre></div>
</div>
</li>
<li><p>Set up a TOV star described by a polytropic equation of state <span class="math notranslate nohighlight">\(p=K \rho^{\mathrm{T}}\)</span></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_Rho_Central</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.28e-3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_Gamma</span>          <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_K</span>              <span class="o">=</span> <span class="mf">100.0</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../../_images/TOV_single.png" src="../../_images/TOV_single.png" />
</div>
</div></blockquote>
</li>
<li><p>Velocity of neutron star</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_Velocity_x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_Velocity_y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TOVSolver</span><span class="p">::</span><span class="n">TOV_Velocity_z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">0.3</span>
</pre></div>
</div>
</li>
<li><p>Two or more of TOVs</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Num_TOVs</span>       <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Num_Radial</span>     <span class="o">=</span> <span class="mi">200000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Combine_Method</span> <span class="o">=</span> <span class="s2">&quot;average&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Rho_Central</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.16e-3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Position_x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="o">-</span><span class="mf">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Rho_Central</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.32e-3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tovsolver</span><span class="p">::</span><span class="n">TOV_Position_x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">15.0</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../../_images/TOV_double.png" src="../../_images/TOV_double.png" />
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="exact">
<h3>Exact<a class="headerlink" href="#exact" title="Permalink to this headline">¶</a></h3>
<p>All of these exact spacetimes have been found useful for testing different aspect of the code.</p>
<p>This thorn sets up the 3+1 ADM variables for any of a number of exact spacetimes/coordinates. Optionally, any 4-metric can be Lorentz-boosted in any direction. As another option, the ADM variables can be calculated on an arbitrary slice through the spacetime, using arbitrary coordinates on the slice.</p>
<div class="section" id="id31">
<h4>Parameter<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The exact solution/coordinates</p></li>
<li><p>By default, this thorn sets up the ADM variables on an initial slice only. However, setting ADMBase::evolution_method so you get an exact spacetime, not just a single slice.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">evolution_method</span> <span class="o">=</span> <span class="s2">&quot;exact&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="boundary">
<h2>Boundary<a class="headerlink" href="#boundary" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>Boundary<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<p>Provides a generic interface to boundary conditions, and provides a set of standard boundary conditions for one, two, and three dimensional grid variables.</p>
<ul class="simple">
<li><p>scalar boundary conditions</p></li>
<li><p>flat boundary conditions</p></li>
<li><p>radiation boundary conditions</p></li>
<li><p>copy boundary conditions</p></li>
<li><p>Robin boundary conditions</p></li>
<li><p>static boundary conditions</p></li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-17f62aee66b56ed91b2593644c4829170eabc99a.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;Boundary&quot; -&gt; &quot;SymBase&quot;;
}</p></object></div>
<div class="section" id="id33">
<h4>Parameter<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Register routine</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_scalar</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_flat</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_radiation</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_copy</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_robin</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_static</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Boundary</span><span class="p">::</span><span class="n">register_none</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id34">
<h4>Warning<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The aliased function ‘SymmetryTableHandleForGrid’ (required by thorn ‘Boundary’) has not been provided by any active thorn !</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;SymBase&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="evolution">
<h2>Evolution<a class="headerlink" href="#evolution" title="Permalink to this headline">¶</a></h2>
<div class="section" id="time">
<h3>Time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>Calculates the timestep used for an evolution by either</p>
<ul class="simple">
<li><p>setting the timestep directly from a parameter value</p></li>
<li><p>using a Courant-type condition to set the timestep based on the grid-spacing used.</p></li>
</ul>
<div class="section" id="id35">
<h4>Parameter<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The standard timestep condition dt = dtfac*max(delta_space)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span><span class="p">::</span><span class="n">dxyz</span> <span class="o">=</span> <span class="mf">0.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">dtfac</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="go">----------------------------------</span>
<span class="go">   it  |          | WAVETOY::phi |</span>
<span class="go">       |    t     | norm2        |</span>
<span class="go">----------------------------------</span>
<span class="go">     0 |    0.000 |   0.10894195 |</span>
<span class="go">     1 |    0.030 |   0.10892065 |</span>
<span class="go">     2 |    0.060 |   0.10885663 |</span>
<span class="go">     3 |    0.090 |   0.10874996 |</span>
</pre></div>
</div>
</li>
<li><p>Absolute value for timestep</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">timestep_method</span> <span class="o">=</span> <span class="s2">&quot;given&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="go">----------------------------------</span>
<span class="go">   it  |          | WAVETOY::phi |</span>
<span class="go">       |    t     | norm2        |</span>
<span class="go">----------------------------------</span>
<span class="go">     0 |    0.000 |   0.10894195 |</span>
<span class="go">     1 |    0.100 |   0.10870525 |</span>
<span class="go">     2 |    0.200 |   0.10799700 |</span>
<span class="go">     3 |    0.300 |   0.10682694 |</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">timestep_method</span> <span class="o">=</span> <span class="s2">&quot;given&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="p">::</span><span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="go">----------------------------------</span>
<span class="go">   it  |          | WAVETOY::phi |</span>
<span class="go">       |    t     | norm2        |</span>
<span class="go">----------------------------------</span>
<span class="go">     0 |    0.000 |   0.10894195 |</span>
<span class="go">     1 |    0.200 |   0.10799478 |</span>
<span class="go">     2 |    0.400 |   0.10520355 |</span>
<span class="go">     3 |    0.600 |   0.10072358 |</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="mol">
<h3>MoL<a class="headerlink" href="#mol" title="Permalink to this headline">¶</a></h3>
<p>The Method of Lines (MoL) converts a (system of) partial differential equation(s) into an ordinary differential equation containing some spatial differential operator. As an example, consider writing the hyperbolic system of PDE’s</p>
<div class="math notranslate nohighlight">
\[\partial_{t} q+A^{i}(q) \partial_{i} B(q)=s(q)\]</div>
<p>in the alternative form</p>
<div class="math notranslate nohighlight">
\[\partial_{t} q=L(q)\]</div>
<p>Given this separation of the time and space discretizations, well known stable ODE integrators such as Runge-Kutta can be used to do the time integration.</p>
<div class="section" id="id36">
<h4>Parameter<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>chooses between the diﬀerent methods.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MoL</span><span class="p">::</span><span class="n">ODE_Method</span> <span class="o">=</span> <span class="s2">&quot;RK4&quot;</span>
<span class="go">INFO (MoL): Using Runge-Kutta 4 as the time integrator.</span>
</pre></div>
</div>
</li>
<li><p>controls the number of intermediate steps for the ODE solver. For the generic Runge-Kutta solvers it controls the order of accuracy of the method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MoL</span><span class="p">::</span><span class="n">MoL_Intermediate_Steps</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
</li>
<li><p>controls the amount of scratch space used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MoL</span><span class="p">::</span><span class="n">MoL_Num_Scratch_Levels</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id37">
<h4>Warning<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>When using the efficient RK4 evolver the number of intermediate steps must be 4, and the number of scratch levels at least 1.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MoL</span><span class="p">::</span><span class="n">MoL_Intermediate_Steps</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MoL</span><span class="p">::</span><span class="n">MoL_Num_Scratch_Levels</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="dissipation">
<h3>Dissipation<a class="headerlink" href="#dissipation" title="Permalink to this headline">¶</a></h3>
<p>Add fourth order Kreiss-Oliger dissipation to the right hand side of
evolution equations.</p>
<p>The additional dissipation terms appear as follows</p>
<div class="math notranslate nohighlight">
\[\partial_{t} \boldsymbol{U}=\partial_{t} \boldsymbol{U}+(-1)^{(p+3) / 2} \epsilon \frac{1}{2^{p+1}}\left(h_{x}^{p} \frac{\partial^{(p+1)}}{\partial x^{(p+1)}}+h_{y}^{p} \frac{\partial^{(p+1)}}{\partial y^{(p+1)}}+h_{z}^{p} \frac{\partial^{(p+1)}}{\partial z^{(p+1)}}\right) \boldsymbol{U}\]</div>
<p>where <span class="math notranslate nohighlight">\(h_{x}\)</span>, <span class="math notranslate nohighlight">\(h_{y}\)</span>, and <span class="math notranslate nohighlight">\(h_{z}\)</span> are the local grid spacings in each Cartesian direction. <span class="math notranslate nohighlight">\(\epsilon\)</span> is a positive, adjustable parameter controlling the amount of dissipation added, and must be less that 1 for stability.</p>
<div class="section" id="id38">
<h4>Parameter<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Dissipation order and strength</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="n">order</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="n">epsdis</span> <span class="o">=</span> <span class="mf">0.1</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently available values of order are <span class="math notranslate nohighlight">\(p \in\{1,3,5,7,9\}\)</span>. To apply dissipation at order p requires that we have at least <span class="math notranslate nohighlight">\((p + 1) / 2\)</span> ghostzones respectively.</p>
</div>
<ul>
<li><p>List of evolved grid functions that should have dissipation added</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="nb">vars</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN::ML_log_confac</span>
<span class="go">                         ML_BSSN::ML_metric</span>
<span class="go">                         ML_BSSN::ML_trace_curv</span>
<span class="go">                         ML_BSSN::ML_curv</span>
<span class="go">                         ML_BSSN::ML_Gamma</span>
<span class="go">                         ML_BSSN::ML_lapse</span>
<span class="go">                         ML_BSSN::ML_shift</span>
<span class="go">                         ML_BSSN::ML_dtlapse</span>
<span class="go">                         ML_BSSN::ML_dtshift&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="ml-bssn">
<h3>ML_BSSN<a class="headerlink" href="#ml-bssn" title="Permalink to this headline">¶</a></h3>
<p>The code is designed to handle arbitrary shift and lapse conditions. Gauges are the commonly used <span class="math notranslate nohighlight">\(1 + log\)</span> and <span class="math notranslate nohighlight">\(\tilde{\Gamma}\)</span>-driver conditions with advection terms.</p>
<p>The hyperbolic K-driver slicing conditions have the form</p>
<div class="math notranslate nohighlight">
\[\left(\partial_{t}-\beta^{i} \partial_{i}\right) \alpha=-f(\alpha) \alpha^{2}\left(K-K_{0}\right)\]</div>
<p>The hyperbolic Gamma-driver condition have the form</p>
<div class="math notranslate nohighlight">
\[\partial_{t}^{2} \beta^{i}=F \partial_{t} \tilde{\Gamma}^{i}-\eta \partial_{t} \beta^{i}.\]</div>
<p>where <span class="math notranslate nohighlight">\(F\)</span> and <span class="math notranslate nohighlight">\(\eta\)</span> are, in general, positive functions of space and time. We typically choose <span class="math notranslate nohighlight">\(F = 3/4\)</span>. For some reason, a simple space-varying prescription for <span class="math notranslate nohighlight">\(\eta\)</span> is implemented</p>
<div class="math notranslate nohighlight">
\[\begin{split}\eta(r):=\frac{2}{M_{T O T}}\left\{\begin{array}{ll}{1} &amp; {\text { for }} {r \leq R} {\text { (near the origin) }} \\ {\frac{R}{r}} &amp; {\text { for }} {r \geq R} {\text { (far away) }}\end{array}\right.\end{split}\]</div>
<p>This is a generalization of many well known slicing and shift conditions.</p>
<div class="section" id="id39">
<h4>Parameter<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Evolution method</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">evolution_method</span>         <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">lapse_evolution_method</span>   <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">shift_evolution_method</span>   <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">dtlapse_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMBase</span><span class="p">::</span><span class="n">dtshift_evolution_method</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN&quot;</span>
</pre></div>
</div>
</li>
<li><p>K-driver slicing conditions: <span class="math notranslate nohighlight">\(\frac{d \alpha}{dt} = - f \alpha^{n} K\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">harmonicN</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">harmonicF</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="go">[1+log slicing condition]</span>
</pre></div>
</div>
</li>
<li><p>Gamma-driver condition: <span class="math notranslate nohighlight">\(F\)</span></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">useSpatialShiftGammaCoeff</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ShiftGammaCoeff</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[F(r) = F\]</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">useSpatialShiftGammaCoeff</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ShiftGammaCoeff</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">spatialShiftGammaCoeffRadius</span> <span class="o">=</span> <span class="mi">50</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[F(r) = Min[1, e^{1 - \frac{r}{R}}] \times F\]</div>
</div></blockquote>
</li>
<li><p>Gamma-driver condition: <span class="math notranslate nohighlight">\(\eta\)</span></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">useSpatialBetaDriver</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">BetaDriver</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">eta</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[\eta(r) = \eta\]</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">useSpatialBetaDriver</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">BetaDriver</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">eta</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">spatialBetaDriverRadius</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">R</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[\eta(r) = \frac{R}{Max[r, R]} \times \eta\]</div>
</div></blockquote>
</li>
<li><p>Enable spatially varying betaDriver</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">useSpatialBetaDriver</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Advect Lapse and shift?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">advectLapse</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">advectShift</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Boundary condition for BSSN RHS and some of the ADMBase variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">rhs_boundary_condition</span> <span class="o">=</span> <span class="s2">&quot;scalar&quot;</span>
</pre></div>
</div>
</li>
<li><p>Whether to apply dissipation to the RHSs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">epsDiss</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="n">epsdis</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="n">order</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Dissipation</span><span class="p">::</span><span class="nb">vars</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN::ML_log_confac</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_metric</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_trace_curv</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_curv</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_Gamma</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_lapse</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_shift</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_dtlapse</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">ML_BSSN</span><span class="p">::</span><span class="n">ML_dtshift</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p>Enforced minimum of the lapse function</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">MinimumLapse</span> <span class="o">=</span> <span class="mf">1.0e-8</span>
</pre></div>
</div>
</li>
<li><p>Finite differencing order</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">fdOrder</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id40">
<h4>Warning<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Insufficient ghost or boundary points for ML_BSSN_InitialADMBase2Interior</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ML_BSSN</span><span class="p">::</span><span class="n">fdOrder</span> <span class="o">=</span> <span class="mi">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="p">::</span><span class="n">ghost_size</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_x_lower</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_y_lower</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_z_lower</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_x_upper</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_y_upper</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CoordBase</span><span class="p">::</span><span class="n">boundary_size_z_upper</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
<li><p>Range error setting parameter ‘ML_BSSN::initial_boundary_condition’ to ‘extrapolate-gammas’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;ML_BSSN_Helper CoordGauge&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="ml-bssn-helper">
<h3>ML_BSSN_Helper<a class="headerlink" href="#ml-bssn-helper" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id41">
<h4>Warning<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The function ExtrapolateGammas has not been provided by any active thorn.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;NewRad&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="illinoisgrmhd">
<h3>illinoisGRMHD<a class="headerlink" href="#illinoisgrmhd" title="Permalink to this headline">¶</a></h3>
<p>IllinoisGRMHD solves the equations of General Relativistic MagnetoHydroDynamics (GRMHD) using a high-resolution shock capturing scheme and the Piecewise Parabolic Method (PPM) for reconstruction.</p>
<p>IllinoisGRMHD evolves the vector potential <span class="math notranslate nohighlight">\(A_{\mu}\)</span> (on staggered grids) instead of the magnetic fields (<span class="math notranslate nohighlight">\(B^i\)</span>) directly, to guarantee that the magnetic fields will remain divergenceless even at AMR boundaries.</p>
<p>IllinoisGRMHD currently implements a hybrid EOS of the form</p>
<div class="math notranslate nohighlight">
\[P\left(\rho_{0}, \epsilon\right)=P_{\text {cold }}\left(\rho_{0}\right)+\left(\Gamma_{\text {th }}-1\right) \rho_{0}\left[\epsilon-\epsilon_{\text {cold }}\left(\rho_{0}\right)\right]\]</div>
<p>where <span class="math notranslate nohighlight">\(P_{\text {cold}}\)</span> and <span class="math notranslate nohighlight">\(\epsilon_{\text {cold}}\)</span> denote the cold component of <span class="math notranslate nohighlight">\(P\)</span> amd <span class="math notranslate nohighlight">\(\epsilon\)</span> respectively, and <span class="math notranslate nohighlight">\(\Gamma_{\text {th}}\)</span> is a constant parameter which determines the conversion efficiency of kinetic to thermal energy at shocks. The function <span class="math notranslate nohighlight">\(\epsilon_{\text {cold }}(\rho_{0})\)</span> is related to <span class="math notranslate nohighlight">\(P_{\text {cold }}\left(\rho_{0}\right)\)</span> by the first law of thermodynamics,</p>
<div class="math notranslate nohighlight">
\[\epsilon_{\mathrm{cold}}\left(\rho_{0}\right)=\int \frac{P_{\mathrm{cold}}\left(\rho_{0}\right)}{\rho_{0}^{2}} d \rho_{0}\]</div>
<p>The <span class="math notranslate nohighlight">\(\Gamma\)</span>-law EOS <span class="math notranslate nohighlight">\(P=(\Gamma-1) \rho_{0} \epsilon\)</span> is adopted. This corresponds to setting <span class="math notranslate nohighlight">\(P_{\text {cold }}=(\Gamma-1) \rho_{0} \epsilon_{\text {cold }}\)</span>, which is equivalent to <span class="math notranslate nohighlight">\(P_{\text {cold }}=\kappa \rho_{0}^{\Gamma}\)</span> (with constant <span class="math notranslate nohighlight">\(\kappa\)</span>), and <span class="math notranslate nohighlight">\(\Gamma_{\mathrm{th}}=\Gamma\)</span>. In the absence of shocks and in the initial data <span class="math notranslate nohighlight">\(\epsilon=\epsilon_{\mathrm{cold}}\)</span> and  <span class="math notranslate nohighlight">\(P=P_{\mathrm{cold}}\)</span></p>
<div class="graphviz"><object data="../../_images/graphviz-7b8f8dde285903936856466150ec671fce8fe0ee.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;IllinoisGRMHD&quot; -&gt; &quot;ADMBase&quot;;
&quot;IllinoisGRMHD&quot; -&gt; &quot;Boundary&quot;;
&quot;IllinoisGRMHD&quot; -&gt; &quot;SpaceMask&quot;;
&quot;IllinoisGRMHD&quot; -&gt; &quot;Tmunubase&quot;;
&quot;IllinoisGRMHD&quot; -&gt; &quot;HydroBase&quot;;
}</p></object></div>
<div class="section" id="id42">
<h4>Parameter<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Determines how much evolution information is output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="s2">&quot;essential&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">verbose</span> <span class="o">=</span> <span class="s2">&quot;essential+iteration output&quot;</span>
</pre></div>
</div>
</li>
<li><p>Floor value on the energy variable tau and the baryonic rest mass density</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">tau_atm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">rho_b_atm</span>
</pre></div>
</div>
</li>
<li><p>Hybrid EOS</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">gamma_th</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">K_poly</span> <span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Chosen Matter and EM field boundary condition</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">EM_BC</span> <span class="o">=</span> <span class="s2">&quot;outflow&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">Matter_BC</span> <span class="o">=</span> <span class="s2">&quot;copy&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">EM_BC</span> <span class="o">=</span> <span class="s2">&quot;frozen&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">Matter_BC</span> <span class="o">=</span> <span class="s2">&quot;frozen&quot;</span> <span class="c1">#If Matter_BC or EM_BC is set to FROZEN, BOTH must be set to frozen!</span>
</pre></div>
</div>
</li>
<li><p>Debug. If the primitives solver fails, this will output all data needed to debug where and why the solver failed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IllinoisGRMHD</span><span class="p">::</span><span class="n">conserv_to_prims_debug</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id-conerter-ilgrmhd">
<h3>ID_conerter_ILGRMHD<a class="headerlink" href="#id-conerter-ilgrmhd" title="Permalink to this headline">¶</a></h3>
<p>IllinoisGRMHD and HydroBase variables are incompatible. The former uses 3-velocity defined as <span class="math notranslate nohighlight">\(v^i = u^i/u^0\)</span>, and the latter uses the Valencia formalism definition of <span class="math notranslate nohighlight">\(v^i\)</span> as measured by normal observers, defined as:</p>
<div class="math notranslate nohighlight">
\[v_{(n)}^{i}=\frac{u^{i}}{\alpha u^{0}}+\frac{\beta^{i}}{\alpha}\]</div>
<p>In addition, IllinoisGRMHD needs the A-fields to be defined on <em>staggered</em> grids, and HydroBase does not yet support this option.</p>
<div class="figure align-default">
<img alt="../../_images/staggeredGird.png" src="../../_images/staggeredGird.png" />
</div>
<div class="graphviz"><object data="../../_images/graphviz-497a283be6ffd520dbf96cd2017a55f9932573c6.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;ADMBase&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;Boundary&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;SpaceMask&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;Tmunubase&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;HydroBase&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;ID_converter_ILGRMHD&quot; -&gt; &quot;IllinoisGRMHD&quot;;
}</p></object></div>
<div class="section" id="id43">
<h4>Parameter<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Single Gamma-law EOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ID_converter_ILGRMHD</span><span class="p">::</span><span class="n">Gamma_Initial</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ID_converter_ILGRMHD</span><span class="p">::</span><span class="n">K_Initial</span>     <span class="o">=</span> <span class="mf">123.64110496340211</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="convert-to-hydrobase">
<h3>convert_to_HydroBase<a class="headerlink" href="#convert-to-hydrobase" title="Permalink to this headline">¶</a></h3>
<p>Convert IllinoisGRMHD-compatible variables to HydroBase-compatible variables. Used for compatibility with HydroBase/ADMBase analysis thorns in the Einstein Toolkit.</p>
<div class="section" id="id44">
<h4>Parameter<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>How often to convert IllinoisGRMHD primitive variables to HydroBase primitive variables? This needed for particle tracer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_HydroBase</span><span class="p">::</span><span class="n">convert_to_HydroBase_every</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
<div class="graphviz"><object data="../../_images/graphviz-2271a01d5c0c36206dff97598744539c83cc7671.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;convert_to_HydroBase&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;convert_to_HydroBase&quot; -&gt; &quot;HydroBase&quot;;
&quot;convert_to_HydroBase&quot; -&gt; &quot;ADMBase&quot;;
&quot;convert_to_HydroBase&quot; -&gt; &quot;IllinoisGRMHD&quot;;
}</p></object></div>
</div>
</div>
</div>
<div class="section" id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="admanalysis">
<h3>ADMAnalysis<a class="headerlink" href="#admanalysis" title="Permalink to this headline">¶</a></h3>
<p>This thorn does basic analysis of the metric and extrinsic curvature tensors.</p>
<p>It calculates</p>
<ul class="simple">
<li><p>the trace of the extrinsic curvature (trK)</p></li>
<li><p>the determinant of the metric (detg)</p></li>
<li><p>the components of the metric in spherical coordinates
(grr,grq,grp,gqq,gqp,gpp)</p></li>
<li><p>the components of the extrinsic curvature in spherical coordinates (Krr,Krq,Krp,Kqq,Kqp,Kpp)</p></li>
<li><p>components of the Ricci tensor</p></li>
<li><p>the Ricci scalar</p></li>
</ul>
<p>(q refers to the theta coordinate and p to the phi coordinate.)</p>
<div class="graphviz"><object data="../../_images/graphviz-f467c5750eecc1eadc37d06244b4220b6d973fdc.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;ADMAnalysis&quot; -&gt; &quot;ADMBase&quot;;
&quot;ADMAnalysis&quot; -&gt; &quot;StaticConformal&quot;;
&quot;ADMAnalysis&quot; -&gt; &quot;Grid&quot;;
&quot;ADMAnalysis&quot; -&gt; &quot;ADMMacros&quot;;
}</p></object></div>
<div class="section" id="id45">
<h4>Parameter<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Project angular components onto <span class="math notranslate nohighlight">\(r*dtheta\)</span> and <span class="math notranslate nohighlight">\(r*sin(theta)*dphi\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMAnalysis</span><span class="p">::</span><span class="n">normalize_dtheta_dphi</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id46">
<h4>Warning<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Cannot output variable because it has no storage</p></li>
</ul>
</div>
<div class="section" id="id47">
<h4>Output<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The Ricci scalar</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMAnalysis::ricci_scalar&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="admmass">
<h3>ADMMass<a class="headerlink" href="#admmass" title="Permalink to this headline">¶</a></h3>
<p>Thorn ADMMass can compute the ADM mass from quantities in ADMBase.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ADMMass uses the ADMMacros for derivatives. Thus, converegence of results is limited to the order of these derivatives (ADMMacros::spatial_order).</p>
</div>
<div class="graphviz"><object data="../../_images/graphviz-c6fc4edd34cd045cb4ff521b140f1591637e62dc.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;ADMMass&quot; -&gt; &quot;ADMBase&quot;;
&quot;ADMMass&quot; -&gt; &quot;ADMMacros&quot;;
&quot;ADMMass&quot; -&gt; &quot;StaticConformal&quot;;
&quot;ADMMass&quot; -&gt; &quot;SpaceMask&quot;;
}</p></object></div>
<div class="section" id="id48">
<h4>Parameter<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Number of measurements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_number</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multiple measurements can be done for both volume and surface integral, but the limit for both is 100 (change param.ccl if you need more).</p>
</div>
<ul>
<li><p>ADMMass provides several possibilities to specify the (ﬁnite) integration domain for surface integral</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_surface_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
</pre></div>
</div>
</li>
<li><p>ADMMass provides several possibilities to specify the (ﬁnite) integration domain for volume integral</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_use_all_volume_as_volume_radius</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="go">Use the whole grid for volume integration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_use_surface_distance_as_volume_radius</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="go">ADMMass_surface_distance is used to specify the integration radius.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_volume_radius</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span><span class="mi">12</span>
<span class="go">ADMMass_volume_radius speciﬁes this radius.</span>
</pre></div>
</div>
</li>
<li><p>Should we exclude the region inside the AH to the volume integral?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_Excise_Horizons</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id49">
<h4>Warning<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>WARNING[L2,P0] (ADMMass): radius &lt; 0 / not set, not calculating the volume integral to get the ADM mass.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ADMMass</span><span class="p">::</span><span class="n">ADMMass_surface_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id50">
<h4>Output<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The results for the volume integral, the usual surface integral and the sorface integral including the lapse</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out0D_vars</span>  <span class="o">=</span> <span class="s2">&quot;ADMMass::ADMMass_Masses&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="smallbpoynet">
<h3>smallbPoynET<a class="headerlink" href="#smallbpoynet" title="Permalink to this headline">¶</a></h3>
<p>Using HydroBase velocity and magnetic field variables, as well as ADMBase spacetime metric variables, smallbPoynET computes <span class="math notranslate nohighlight">\(b^i\)</span>, and three spatial components of Poynting flux. It also computes <span class="math notranslate nohighlight">\(-1 - u_{0}\)</span>, which is useful for tracking unbound matter.</p>
<div class="graphviz"><object data="../../_images/graphviz-32d5a5d1e35f85c1732d56bf4e8c5f10f19bb77e.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;smallbPoynET&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;smallbPoynET&quot; -&gt; &quot;HydroBase&quot;;
&quot;smallbPoynET&quot; -&gt; &quot;ADMBase&quot;;
}</p></object></div>
<div class="section" id="id51">
<h4>Parameter<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>How often to compute smallbPoyn?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">smallbPoynET</span><span class="p">::</span><span class="n">smallbPoynET_compute_every</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id52">
<h4>Output<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Poynting flux</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</li>
<li><p><span class="math notranslate nohighlight">\(b^i\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetIOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;smallbPoynET::smallb2</span>
<span class="go">                                 smallbPoynET::smallbx</span>
<span class="go">                                 smallbPoynET::smallby</span>
<span class="go">                                 smallbPoynET::smallbz&quot;</span>
</pre></div>
</div>
</li>
<li><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CarpetIOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;smallbPoynET::minus_one_minus_u_0&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="particle-traceret">
<h3>particle_tracerET<a class="headerlink" href="#particle-traceret" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides essential functionality for self-consistent visualizations of the dynamics of magnetic field lines over time in a GRMHD simulation.</p>
<div class="graphviz"><object data="../../_images/graphviz-0689c6994d9fd196da3fbb494505ff8139160925.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;particle_tracerET&quot; -&gt; &quot;CartGrid3D&quot;;
&quot;particle_tracerET&quot; -&gt; &quot;HydroBase&quot;;
&quot;particle_tracerET&quot; -&gt; &quot;ADMBase&quot;;
}</p></object></div>
</div>
<div class="section" id="ml-admconstraints">
<h3>ML_ADMConstraints<a class="headerlink" href="#ml-admconstraints" title="Permalink to this headline">¶</a></h3>
<p>ML_ADMConstraints calculates the ADM constraints violation, but directly using potentially higher-order derivatives, and is, in general, preferred over ADMConstraints.</p>
<div class="graphviz"><object data="../../_images/graphviz-e25d23175c872268257cdf0c2683666ce2bf7b9e.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;ML_ADMConstraints&quot; -&gt; &quot;GenericFD&quot;;
&quot;ML_ADMConstraints&quot; -&gt; &quot;TmunuBase&quot;;
&quot;TmunuBase&quot; -&gt; &quot;ADMCoupling&quot;;
&quot;TmunuBase&quot; -&gt; &quot;ADMMacros&quot;;
}</p></object></div>
<div class="section" id="id53">
<h4>Output<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Hamiltonian constraint</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;ML_ADMConstraints::ML_Ham&quot;</span>
</pre></div>
</div>
</li>
<li><p>Momentum constraints</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOHDF5</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;ML_ADMConstraints::ML_mom&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="quasilocalmeasures">
<h3>QuasiLocalMeasures<a class="headerlink" href="#quasilocalmeasures" title="Permalink to this headline">¶</a></h3>
<p>Calculate quasi-local measures such as masses, momenta, or angular
momenta and related quantities on closed two-dimentional surfaces,
including on horizons.</p>
<div class="section" id="id54">
<h4>Parameter<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Input a surface that the user specifies and can calculate useful quantities</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">QuasiLocalMeasures</span><span class="p">::</span><span class="n">num_surfaces</span>   <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">QuasiLocalMeasures</span><span class="p">::</span><span class="n">spatial_order</span>  <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">QuasiLocalMeasures</span><span class="p">::</span><span class="n">interpolator</span> <span class="o">=</span> <span class="s2">&quot;Lagrange polynomial interpolation&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">QuasiLocalMeasures</span><span class="p">::</span><span class="n">interpolator_options</span> <span class="o">=</span> <span class="s2">&quot;order=4&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">QuasiLocalMeasures</span><span class="p">::</span><span class="n">surface_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;waveextract surface at 100&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id55">
<h4>Output<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Scalar quantities on the surface</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out0D_vars</span>  <span class="o">=</span> <span class="s2">&quot;QuasiLocalMeasures::qlm_scalars&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="ahfinderdirect">
<h3>AHFinderDirect<a class="headerlink" href="#ahfinderdirect" title="Permalink to this headline">¶</a></h3>
<p>In 3+1 numerical relativity, it’s often useful to know the positions and shapes of any black holes in each slice.</p>
<p>Finding Apparent Horizons in a numerical spacetime. It calulates various quantities like horizon area and its corresponding mass.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The main complication here is that AHFinderDirect needs an initial guess for an AH shape, and if this initial guess is inaccurate AHFinderDirect may fail to find the AH.</p>
</div>
<div class="section" id="id56">
<h4>Parameter<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>How often should we try to find apparent horizons?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">find_every</span> <span class="o">=</span> <span class="mi">128</span> <span class="c1"># every course</span>
</pre></div>
</div>
</li>
<li><p>Number of apparent horizons to search for</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">N_horizons</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Move the origins with the horizons</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">move_origins</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
<li><p>Which surface should we store the info?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">origin_x</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">initial_guess__coord_sphere__x_center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">initial_guess__coord_sphere__radius</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">which_surface_to_store_info</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">track_origin_source_x</span>        <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PunctureTracker::pt_loc_x[0]&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">track_origin_source_y</span>        <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PunctureTracker::pt_loc_y[0]&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">track_origin_source_z</span>        <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PunctureTracker::pt_loc_z[0]&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AHFinderDirect</span><span class="p">::</span><span class="n">max_allowable_horizon_radius</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="multipole">
<h3>Multipole<a class="headerlink" href="#multipole" title="Permalink to this headline">¶</a></h3>
<p>Multipole thorn can decompose multiple grid functions with any spin-weight on multiple spheres. A set of radii for these spheres, as well as the number of angular points to use, can be speciﬁed.</p>
<p>The angular dependence of a field <span class="math notranslate nohighlight">\(u(t, r, \theta, \varphi)\)</span> can be expanded in spin-weight s spherical harmonics</p>
<div class="math notranslate nohighlight">
\[u(t, r, \theta, \varphi)=\sum_{l=0}^{\infty} \sum_{m=-l}^{l} C^{l m}(t, r)_{s} Y_{l m}(\theta, \varphi)\]</div>
<p>where the coefficients <span class="math notranslate nohighlight">\(C^{l m}(t, r)\)</span> are given by</p>
<div class="graphviz"><object data="../../_images/graphviz-d917ca8594589ff071548e075e5a870cdde30ba3.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;Multipole&quot; -&gt; &quot;AEILocalInterp&quot;;
}</p></object></div>
<div class="section" id="id57">
<h4>Parameter<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Decide the number and radii of the coordinate spheres on which you want to decompose.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">nradii</span>    <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">radius</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">radius</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">radius</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">variables</span> <span class="o">=</span> <span class="s2">&quot;MyThorn::u&quot;</span>
</pre></div>
</div>
</li>
<li><p>How many points in the theta and phi direction?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">ntheta</span> <span class="o">=</span> <span class="mi">120</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">nphi</span>   <span class="o">=</span> <span class="mi">240</span>
</pre></div>
</div>
</li>
<li><p>The maximum l mode to extract</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">l_max</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>
</div>
</li>
<li><p>Output an HDF5 file for each variable containing one dataset per mode at each radius</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Multipole</span><span class="p">::</span><span class="n">output_hdf5</span>  <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="weylscal4">
<h3>WeylScal4<a class="headerlink" href="#weylscal4" title="Permalink to this headline">¶</a></h3>
<p>Calculate the Weyl Scalars for a given metric given the fiducial tetrad.</p>
<div class="section" id="id58">
<h4>Parameter<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Finite differencing order</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">WeylScal4</span><span class="p">::</span><span class="n">fdOrder</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>
</div>
</li>
<li><p>Which scalars to calculate</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">WeylScal4</span><span class="p">::</span><span class="n">calc_scalars</span> <span class="o">=</span> <span class="s2">&quot;psis&quot;</span>
</pre></div>
</div>
</li>
<li><p>Compute invariants</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">WeylScal4</span><span class="p">::</span><span class="n">calc_invariants</span> <span class="o">=</span> <span class="s2">&quot;always&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="numerical">
<h2>Numerical<a class="headerlink" href="#numerical" title="Permalink to this headline">¶</a></h2>
<p>Provides numerical infrastructure thorns.</p>
<div class="section" id="spacemask">
<h3>SpaceMask<a class="headerlink" href="#spacemask" title="Permalink to this headline">¶</a></h3>
<p>The mask is a grid function which can be used to assign a state to each point on the grid. It is used as a bit ﬁeld, with different bits, or combinations of bits, assigned to represent various states.</p>
<p>For instance, a programmer wants to record whether each point of the grid has state “interior”, “excised” or “boundary”. 2-bits of the mask (enough to represent the three possible states of the type) are allocated to hold this information.  If a new type is required, bits are allocated to it from the remaining free bits in the mask.</p>
<div class="figure align-default">
<img alt="../../_images/Spacemask.png" src="../../_images/Spacemask.png" />
</div>
<div class="section" id="id59">
<h4>Parameter<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Turn on storage for mask</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SpaceMask</span><span class="p">::</span><span class="n">use_mask</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="sphericalsurface">
<h3>SphericalSurface<a class="headerlink" href="#sphericalsurface" title="Permalink to this headline">¶</a></h3>
<p>SphericalSurface defines two-dimensional surfaces with spherical topology. The thorn itself only acts as a repository for other thorns to set and retrieve such surfaces, making it a pure infrastructure thorn. One thorn can update a given spherical surface with information, and another thorn can read that information without having to know about the first thorn.</p>
<div class="section" id="id60">
<h4>Parameter<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Number of surfaces</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">nsurfaces</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Surface Definition: Maximum number of grid points in the theta amd phi direction</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">maxntheta</span> <span class="o">=</span> <span class="mi">39</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">maxnphi</span>   <span class="o">=</span> <span class="mi">76</span>
</pre></div>
</div>
</li>
<li><p>Surface Definition and set resolution according to given parameters. Some of spherical surface index may be used by PunctureTracker.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">name</span>        <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Righthand NS&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">ntheta</span>      <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">39</span> <span class="c1"># must be at least 3*nghoststheta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">nphi</span>        <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">76</span> <span class="c1"># must be at least 3*nghostsphi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">nghoststheta</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">nghostsphi</span>  <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Place surface at a certain radius</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">set_spherical</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">yes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SphericalSurface</span><span class="p">::</span><span class="n">radius</span>       <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">250</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="utility">
<h2>Utility<a class="headerlink" href="#utility" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nanchecker">
<h3>NaNChecker<a class="headerlink" href="#nanchecker" title="Permalink to this headline">¶</a></h3>
<p>The NaNChecker thorn can be used to analyze Cactus grid variables (that is grid functions, arrays or scalars) for NaN (Not-a-Number) and inﬁnite values.</p>
<div class="section" id="id61">
<h4>Parameter<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>How often to check for NaNs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">check_every</span> <span class="o">=</span> <span class="mi">128</span>
</pre></div>
</div>
</li>
<li><p>Groups and/or variables to check for NaNs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">check_vars</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span> <span class="c1"># List of full group and/or variable names, or &#39;all&#39; for everything</span>
<span class="go">[1mWARNING level 1 from host ubuntu process 0</span>
<span class="go">while executing schedule bin NaNChecker_NaNCheck, routine NaNChecker::NaNChecker_NaNCheck_Check</span>
<span class="go">in thorn NaNChecker, file /home4/yuliu/Cactus/arrangements/CactusUtils/NaNChecker/src/NaNCheck.cc:875:</span>
<span class="go">-&gt;[0m There were 142 NaN/Inf value(s) found in variable &#39;HYDROBASE::rho&#39;</span>
</pre></div>
</div>
</li>
<li><p>What to do if a NaN was found</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">action_if_found</span> <span class="o">=</span> <span class="s2">&quot;terminate&quot;</span>
<span class="go">[1mWARNING level 1 from host ubuntu process 0</span>
<span class="go">while executing schedule bin CCTK_POSTSTEP, routine NaNChecker::NaNChecker_TakeAction</span>
<span class="go">in thorn NaNChecker, file /home4/yuliu/Cactus/arrangements/CactusUtils/NaNChecker/src/NaNCheck.cc:251:</span>
<span class="go">-&gt;[0m &#39;action_if_found&#39; parameter is set to &#39;terminate&#39; - scheduling graceful termination of Cactus</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">action_if_found</span> <span class="o">=</span> <span class="s2">&quot;just warn&quot;</span>
</pre></div>
</div>
</li>
<li><p>Tracking and Visualizing NaNs Positions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">out_NaNmask</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NaNChecker</span><span class="p">::</span><span class="n">out_NaNmask</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="systemstatistics">
<h3>SystemStatistics<a class="headerlink" href="#systemstatistics" title="Permalink to this headline">¶</a></h3>
<p>Thorn SystemStatistics collects information about the system on which a Cactus process is running and stores it in Cactus variables. These variables can then be output and reduced using the standard Cactus methods such as IOBasic and IOScalar.</p>
<div class="section" id="id62">
<h4>Output<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Run memory statistics in MB</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_vars</span>  <span class="o">=</span> <span class="s2">&quot;SystemStatistics::maxrss_mb{reductions = &#39;maximum&#39;}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;SystemStatistics::process_memory_mb&quot;</span>
<span class="go">-------------------------------</span>
<span class="go">Iteration      Time | *axrss_mb</span>
<span class="go">                    |   maximum</span>
<span class="go">-------------------------------</span>
<span class="go">        0     0.000 |       166</span>
<span class="go">       32     1.000 |       172</span>
<span class="go">       64     2.000 |       172</span>
<span class="go">       96     3.000 |       172</span>
<span class="go">[systemstatistics-process_memory_mb.maximum.asc]</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../../_images/systemstatistics.png" src="../../_images/systemstatistics.png" />
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="trigger">
<h3>Trigger<a class="headerlink" href="#trigger" title="Permalink to this headline">¶</a></h3>
<p>Trigger can be used to change parameters depending on data from the simulation.</p>
</div>
<div class="section" id="terminationtrigger">
<h3>TerminationTrigger<a class="headerlink" href="#terminationtrigger" title="Permalink to this headline">¶</a></h3>
<p>This thorn watches the elapsed walltime. If only n minutes are left before the some limit set by the user, it triggers termination of the simulation.</p>
<div class="section" id="id63">
<h4>Parameter<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Walltime in HOURS allocated for this job</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TerminationTrigger</span><span class="p">::</span><span class="n">max_walltime</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>When to trigger termination in MINUTES</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TerminationTrigger</span><span class="p">::</span><span class="n">on_remaining_walltime</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Output remaining wall time every n minutes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TerminationTrigger</span><span class="p">::</span><span class="n">output_remtime_every_minutes</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
<li><p>Create an empty termination file at startup</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TerminationTrigger</span><span class="p">::</span><span class="n">create_termination_file</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="i-o">
<h2>I/O<a class="headerlink" href="#i-o" title="Permalink to this headline">¶</a></h2>
<p>In Carpet, a local grid (a “cuboid” that has a uniform spacing in each axis, and lives on a single processor) has a number of attributes:</p>
<ul class="simple">
<li><p><strong>reflevel</strong> - This is an integer specifing the grid’s “refinement level” in the Berger-Oliger algorithm.</p></li>
<li><p><strong>map</strong> - This is an integer specifying the “map” (grid patch) at this refinement level.</p></li>
<li><p><strong>component</strong> - This is an integer specifying one of the local grids in this map/patch.</p></li>
</ul>
<div class="section" id="ioutil">
<h3>IOUtil<a class="headerlink" href="#ioutil" title="Permalink to this headline">¶</a></h3>
<p>Thorns providing IO methods typically have string parameters which list the variables which should be output, how frequently (i.e. how many iterations between output), and where the output should go.</p>
<div class="graphviz"><object data="../../_images/graphviz-4c68e2c5d8b078b7c7cef916acc1758d826453fc.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph foo {
&quot;IOUtil&quot; -&gt; &quot;CarpetSlab&quot;;
&quot;IOUtil&quot; -&gt; &quot;PUGHSlab&quot;;
}</p></object></div>
<div class="section" id="id64">
<h4>Parameter<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The name of the directory to be used for output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; IO::out_dir = $parfile
</pre></div>
</div>
</li>
<li><p>How often, in terms of iterations, each of the Cactus I/O methods will write output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_every</span> <span class="o">=</span> <span class="mi">2</span>
<span class="go">------------------------------</span>
<span class="go">it |          | *::coarse_dx |</span>
<span class="go">   |    t     | scalar value |</span>
<span class="go">------------------------------</span>
<span class="go"> 0 |    0.000 |   0.25000000 |</span>
<span class="go"> 2 |    2.000 |   0.25000000 |</span>
<span class="go"> 4 |    4.000 |   0.25000000 |</span>
<span class="go"> 6 |    6.000 |   0.25000000 |</span>
<span class="go"> 8 |    8.000 |   0.25000000 |</span>
</pre></div>
</div>
</li>
<li><p>writing to file is performed only by processor zero. This processor gathers all the output data from the other processors and then writes to a single ﬁle.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_mode</span> <span class="o">=</span> <span class="s2">&quot;onefile&quot;</span>
</pre></div>
</div>
</li>
<li><p>Every processor writes its own chunk of data into a separate output ﬁle.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_mode</span> <span class="o">=</span> <span class="s2">&quot;proc&quot;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a run on multiple processors, scalar, 1D, and 2D output will always be written from only processor zero (that is, required data from all other processors will be sent to processor zero, which then outputs all the gathered data). For full-dimensional output of grid arrays this may become a quite expensive operation since output by only a single processor will probably result in an I/O bottleneck and delay further computation. For this reason Cactus offers different I/O modes for such output which can be controlled by the <em>IO::out_mode</em> parameter, in combination with <em>IO::out_unchunked</em> and <em>IO::out_proc_every</em>.</p>
</div>
<ul>
<li><p>Checkpointing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">checkpoint_ID</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>             <span class="c1"># Checkpoint initial data</span>
<span class="go">INFO (CarpetIOHDF5): Dumping initial checkpoint at iteration 0, simulation time 0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">checkpoint_every</span> <span class="o">=</span> <span class="mi">1</span>              <span class="c1"># How often to checkpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">checkpoint_on_terminate</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>   <span class="c1"># Checkpoint after last iteration</span>
<span class="go">INFO (CarpetIOHDF5): Dumping termination checkpoint at iteration 2432, simulation time 47.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">checkpoint_dir</span> <span class="o">=</span> <span class="s2">&quot;../checkpoints&quot;</span> <span class="c1"># Output directory for checkpoint files</span>
<span class="go">[checkpoint.chkpt.it_0.file_0.h5]</span>
<span class="go">[checkpoint.chkpt.it_0.file_1.h5]</span>
<span class="go">. . .</span>
<span class="go">[checkpoint.chkpt.it_128.file_0.h5]</span>
<span class="go">. . .</span>
</pre></div>
</div>
</li>
<li><p>Recover</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">recover_dir</span> <span class="o">=</span> <span class="s2">&quot;../checkpoints&quot;</span> <span class="c1"># Directory to look for recovery files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">recover</span> <span class="o">=</span> <span class="s2">&quot;autoprobe&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id65">
<h4>Warning<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>No driver thorn activated to provide storage for variables</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;CarpetSlab&quot;</span>
<span class="go">AMR driver provided by Carpet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;PUGHSlab&quot;</span>
<span class="go">Driver provided by PUGH</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="iobasic">
<h3>IOBasic<a class="headerlink" href="#iobasic" title="Permalink to this headline">¶</a></h3>
<p>Thorn IOBasic provides I/O methods for outputting scalar values in ASCII format into files and for printing them as runtime information to screen.</p>
<ul class="simple">
<li><p>This method outputs the information into ASCII files named “&lt;scalar_name&gt;.{asc|xg}” (for CCTK_SCALAR variables) and “&lt;var_name&gt;_&lt;reduction&gt;.{asc|xg}” (for CCTK_GF and CCTK_ARRAY variables where reduction would stand for the type of reduction operations (eg. minimum, maximum, L1, and L2 norm)</p></li>
<li><p>This method prints the data as runtime information to stdout. The output occurs as a table with columns containing the current iteration number, the physical time at this iteration, and more columns for scalar/reduction values of each variable to be output.</p></li>
</ul>
<div class="section" id="reduction-operations">
<h4>Reduction Operations<a class="headerlink" href="#reduction-operations" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The minimum of the values</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\min :=\min _{i} a_{i}\]</div>
</div></blockquote>
</li>
<li><p>The maximum of the values</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\max :=\max _{i} a_{i}\]</div>
</div></blockquote>
</li>
<li><p>The norm1 of the values</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\frac{\Sigma\left|a_{i}\right|}{count}\]</div>
</div></blockquote>
</li>
<li><p>The norm2 of the values</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\sqrt{\frac{\sum_{i}\left|a_{i}\right|^{2}}{count}}\]</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id66">
<h4>Parameter<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Print the information of CCTK_SCALAR variables</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_vars</span> <span class="o">=</span> <span class="s2">&quot;grid::coarse_dx&quot;</span>
<span class="go">-------------------------------</span>
<span class="go">it  |          | *::coarse_dx |</span>
<span class="go">    |    t     | scalar value |</span>
<span class="go">-------------------------------</span>
<span class="go">  0 |    0.000 |   0.25000000 |</span>
</pre></div>
</div>
</li>
<li><p>Print the information of CCTK_GF and CCTK_ARRAY variables with the type of reduction</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_vars</span> <span class="o">=</span> <span class="s2">&quot;wavetoy::phi&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_reductions</span> <span class="o">=</span> <span class="s2">&quot;minimum maximum&quot;</span>
<span class="go">----------------------------------------------</span>
<span class="go">it  |          | WAVETOY::phi                |</span>
<span class="go">    |    t     | minimum      | maximum      |</span>
<span class="go">----------------------------------------------</span>
<span class="go">  0 |    0.000 | 7.104375e-13 |   0.99142726 |</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_vars</span> <span class="o">=</span> <span class="s2">&quot;wavetoy::phi{reductions = &#39;norm2&#39;}&quot;</span>
<span class="go">-------------------------------</span>
<span class="go">it  |          | WAVETOY::phi |</span>
<span class="go">    |    t     | norm2        |</span>
<span class="go">-------------------------------</span>
<span class="go">  0 |    0.000 |   0.10894195 |</span>
</pre></div>
</div>
</li>
<li><p>Outputs CCTK_SCALAR variabless into ASCII files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;grid::coarse_dx&quot;</span>
<span class="go">[~/simulations/example/output-0000/example/coarse_dx.xg]</span>
<span class="go">&quot;Parameter file /home4/yuliu/simulations/example/output-0000/example.par</span>
<span class="go">&quot;Created Sep 05 2019 05:05:37-0400</span>
<span class="go">&quot;x-label time</span>
<span class="go">&quot;y-label GRID::coarse_dx</span>
<span class="go">&quot;coarse_dx v time</span>
<span class="go">0.0000000000000     0.2500000000000</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id67">
<h4>Warning<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>WARNING[L1,P0] (IOBasic): Unknown reduction operator ‘minimum’. Maybe you forgot to activate thorn LocalReduce? (Driver provided by Carpet)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;CarpetIOBasic CarpetReduce&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="ioascii">
<h3>IOASCII<a class="headerlink" href="#ioascii" title="Permalink to this headline">¶</a></h3>
<p>Thorn IOASCII provides I/O methods for 1D, 2D, and 3D output of grid arrays and grid functions into files in ASCII format.</p>
<div class="section" id="id68">
<h4>Parameter<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Outputs CCTK_GF and CCTK_ARRAY variables into ASCII files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out1D_every</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out1D_style</span> <span class="o">=</span> <span class="s2">&quot;gnuplot f(x)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out1D_vars</span> <span class="o">=</span> <span class="s2">&quot;wavetoy::phi&quot;</span>
<span class="go">[~/simulations/example1/output-0000/example1/phi_x_[1][1].asc]</span>
<span class="go">#Parameter file /home4/yuliu/simulations/example/output-0000/example.par</span>
<span class="go">#Created Sep 07 2019 03:55:52-0400</span>
<span class="go">#x-label x</span>
<span class="go">#y-label WAVETOY::phi (y = 0.1500000000000, z = 0.1500000000000), (yi = 1, zi = 1)</span>
<span class="go">#Time = 0.0000000000000</span>
<span class="go">-0.1500000000000            0.9914272633971</span>
<span class="go">0.1500000000000             0.9914272633971</span>
<span class="go">0.4500000000000             0.9689242170281</span>
<span class="go">0.7500000000000             0.9254388283880</span>
<span class="go">. . .</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id69">
<h4>Warning<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>The aliased function ‘Hyperslab_GetList’ (required by thorn ‘IOASCII’) has not been provided by any active thorn ! (Driver provided by Carpet)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;CarpetIOASCII&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetiobasic">
<h3>CarpetIOBasic<a class="headerlink" href="#carpetiobasic" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides info output for Carpet.</p>
<div class="section" id="id70">
<h4>Parameter<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Variables to output in scalar form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOBasic</span><span class="p">::</span><span class="n">outInfo_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="go">-----------------------------------------------</span>
<span class="go">Iteration      Time |              ADMBASE::gxx</span>
<span class="go">                    |      minimum      maximum</span>
<span class="go">-----------------------------------------------</span>
<span class="go">        0     0.000 |    1.0000000    1.0000000</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id71">
<h4>Warning<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Reduction operator “maximum” does not exist (maybe there is no reduction thorn active?)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ActiveThorns</span> <span class="o">=</span> <span class="s2">&quot;CarpetReduce&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetioscalar">
<h3>CarpetIOScalar<a class="headerlink" href="#carpetioscalar" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides scalar output for Carpet.</p>
<div class="section" id="id72">
<h4>Parameter<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Variables to output in scalar form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">outScalar_vars</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Write one file per group instead of per variable</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOScalar</span><span class="p">::</span><span class="n">one_file_per_group</span> <span class="o">=</span> <span class="n">yes</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetioascii">
<h3>CarpetIOASCII<a class="headerlink" href="#carpetioascii" title="Permalink to this headline">¶</a></h3>
<p>This thorn provides ASCII output for Carpet. The CarpetIOASCII I/O methods can output any type of CCTK grid variables (grid scalars, grid functions, and grid arrays of arbitrary dimension); data is written into separate ﬁles named “&lt;varname&gt;.asc”.</p>
<p>It reproduces most of the functionality of thorn IOASCII from the standard CactusBase arrangement. Where possible the names of parameters and their use is identical. However, this thorn outputs considerably more information than the standard IOASCII thorn. Information about, e.g., the reﬁnement level and the index position of the output are also given. All the output can be visualized using gnuplot.</p>
<div class="section" id="id73">
<h4>Parameter<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Variables to output in 1D ASCII file format</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out1D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="go">[~/simulations/example/output-0000/example/gxx.x.asc]</span>
<span class="go"># 1D ASCII output created by CarpetIOASCII</span>
<span class="go"># created on ubuntu by yuliu on Sep 10 2019 at 03:33:33-0400</span>
<span class="go"># parameter filename: &quot;/home4/yuliu/simulations/example/output-0000/example.par&quot;</span>
<span class="go">#</span>
<span class="go"># gxx x (gxx)</span>
<span class="go">#</span>
<span class="go"># iteration 0   time 0</span>
<span class="go"># time level 0</span>
<span class="go"># refinement level 0   multigrid level 0   map 0   component 0</span>
<span class="go"># column format: 1:it       2:tl    3:rl 4:c 5:ml   6:ix 7:iy 8:iz  9:time  10:x 11:y 12:z  13:data</span>
<span class="go">. . .</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out2D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="go">[~/simulations/example/output-0000/example/gxx.xy.asc]</span>
<span class="go"># 2D ASCII output created by CarpetIOASCII</span>
<span class="go"># created on ubuntu by yuliu on Sep 10 2019 at 04:14:22-0400</span>
<span class="go"># parameter filename: &quot;/home4/yuliu/simulations/example/output-0000/example.par&quot;</span>
<span class="go">#</span>
<span class="go"># gxx x y (gxx)</span>
<span class="go">#</span>
<span class="go"># iteration 0   time 0</span>
<span class="go"># time level 0</span>
<span class="go"># refinement level 0   multigrid level 0   map 0   component 0</span>
<span class="go"># column format: 1:it       2:tl    3:rl 4:c 5:ml   6:ix 7:iy 8:iz  9:time  10:x 11:y 12:z  13:data</span>
<span class="go">0   0       0 0 0   0 0 12  0       -12 -12 0       1</span>
<span class="go">0   0       0 0 0   1 0 12  0       -11 -12 0       1</span>
<span class="go">0   0       0 0 0   2 0 12  0       -10 -12 0       1</span>
<span class="go">. . .</span>
<span class="go">0   0       0 0 0   0 1 12  0       -12 -11 0       1</span>
<span class="go">0   0       0 0 0   1 1 12  0       -11 -11 0       1</span>
<span class="go">0   0       0 0 0   2 0 12  0       -10 -11 0       1</span>
<span class="go">. . .</span>
<span class="go">0   0       0 0 0   0 2 12  0       -12 -10 0       1</span>
<span class="go">0   0       0 0 0   1 2 12  0       -11 -10 0       1</span>
<span class="go">0   0       0 0 0   2 2 12  0       -10 -10 0       1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out3D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="go">[~/simulations/example/output-0000/example.par]</span>
<span class="go"># 3D ASCII output created by CarpetIOASCII</span>
<span class="go"># created on ubuntu by yuliu on Sep 10 2019 at 04:19:51-0400</span>
<span class="go"># parameter filename: &quot;/home4/yuliu/simulations/example/output-0000/example.par&quot;</span>
<span class="go">#</span>
<span class="go"># gxx x y z (gxx)</span>
<span class="go">#</span>
<span class="go"># iteration 0   time 0</span>
<span class="go"># time level 0</span>
<span class="go"># refinement level 0   multigrid level 0   map 0   component 0</span>
<span class="go"># column format: 1:it   2:tl    3:rl 4:c 5:ml   6:ix 7:iy 8:iz  9:time  10:x 11:y 12:z  13:data</span>
<span class="go">0       0       0 0 0   0 0 0   0       -12 -12 -12     1</span>
<span class="go">0       0       0 0 0   1 0 0   0       -11 -12 -12     1</span>
<span class="go">0       0       0 0 0   2 0 0   0       -10 -12 -12     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 1 0   0       -12 -11 -12     1</span>
<span class="go">0       0       0 0 0   1 1 0   0       -11 -11 -12     1</span>
<span class="go">0       0       0 0 0   2 1 0   0       -10 -11 -12     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 2 0   0       -12 -10 -12     1</span>
<span class="go">0       0       0 0 0   1 2 0   0       -11 -10 -12     1</span>
<span class="go">0       0       0 0 0   2 2 0   0       -10 -10 -12     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 0 1   0       -12 -12 -11     1</span>
<span class="go">0       0       0 0 0   1 0 1   0       -11 -12 -11     1</span>
<span class="go">0       0       0 0 0   2 0 1   0       -10 -12 -11     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 1 0   0       -12 -11 -11     1</span>
<span class="go">0       0       0 0 0   1 1 0   0       -11 -11 -11     1</span>
<span class="go">0       0       0 0 0   2 1 0   0       -10 -11 -11     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 2 0   0       -12 -10 -11     1</span>
<span class="go">0       0       0 0 0   1 2 0   0       -11 -10 -11     1</span>
<span class="go">0       0       0 0 0   2 2 0   0       -10 -10 -11     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 0 1   0       -12 -12 -10     1</span>
<span class="go">0       0       0 0 0   1 0 1   0       -11 -12 -10     1</span>
<span class="go">0       0       0 0 0   2 0 1   0       -10 -12 -10     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 1 0   0       -12 -11 -10     1</span>
<span class="go">0       0       0 0 0   1 1 0   0       -11 -11 -10     1</span>
<span class="go">0       0       0 0 0   2 1 0   0       -10 -11 -10     1</span>
<span class="go">. . .</span>
<span class="go">0       0       0 0 0   0 2 0   0       -12 -10 -10     1</span>
<span class="go">0       0       0 0 0   1 2 0   0       -11 -10 -10     1</span>
<span class="go">0       0       0 0 0   2 2 0   0       -10 -10 -10     1</span>
</pre></div>
</div>
</li>
<li><p>Write one file per group instead of per variable</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out3D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">one_file_per_group</span> <span class="o">=</span> <span class="n">yes</span>
<span class="go">[~/simulations/example/output-0000/example/admbase-metric.xyz.asc]</span>
<span class="go"># 3D ASCII output created by CarpetIOASCII</span>
<span class="go"># created on ubuntu by yuliu on Sep 10 2019 at 04:28:57-0400</span>
<span class="go"># parameter filename: &quot;/home4/yuliu/simulations/example/output-0000/example.par&quot;</span>
<span class="go">#</span>
<span class="go"># ADMBASE::METRIC x y z (admbase-metric)</span>
<span class="go">#</span>
<span class="go"># iteration 0   time 0</span>
<span class="go"># time level 0</span>
<span class="go"># refinement level 0   multigrid level 0   map 0   component 0</span>
<span class="go"># column format: 1:it   2:tl    3:rl 4:c 5:ml   6:ix 7:iy 8:iz  9:time  10:x 11:y 12:z  13:data</span>
<span class="go"># data columns: 13:gxx 14:gxy 15:gxz 16:gyy 17:gyz 18:gzz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">out3D_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IOASCII</span><span class="p">::</span><span class="n">one_file_per_group</span> <span class="o">=</span> <span class="n">no</span>
<span class="go">[~/simulations/example/output-0000/example/gxx.xyz.asc]</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="carpetiohdf5">
<h3>CarpetIOHDF5<a class="headerlink" href="#carpetiohdf5" title="Permalink to this headline">¶</a></h3>
<p>Thorn CarpetIOHDF5 provides HDF5-based output to the Carpet mesh refinement driver in Cactus. The CarpetIOHDF5 I/O method can output any type of CCTK grid variables (grid scalars, grid functions, and grid arrays of arbitrary dimension); data is written into separate ﬁles named “&lt;varname&gt;.h5”. <strong>HDF5 is highly recommended over ASCII for performance and storage-size reasons.</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default is to output distributed grid variables in parallel, each processor writing a file &lt;varname&gt;.file_&lt;processor ID&gt;.h5. Unchunked means that an entire Cactus grid array (gathered across all processors) is stored in a single HDF5 dataset whereas chunked means that all the processor-local patches of this array are stored as separate HDF5 datasets (called chunks). Consequently, for unchunked data all interprocessor ghostzones are excluded from the output. In contrast, for chunked data the interprocessor ghostzones are included in the output. When visualising chunked datasets, they probably need to be recombined for a global view on the data. This needs to be done within the visualisation tool.</p>
</div>
<div class="section" id="id74">
<h4>Parameter<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Variables to output in CarpetIOHDF5 file format. The variables must be given by their fully qualiﬁed variable or group name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOHDF5</span><span class="p">::</span><span class="n">out_vars</span> <span class="o">=</span> <span class="s2">&quot;ADMBase::gxx&quot;</span>
</pre></div>
</div>
</li>
<li><p>Parallel (chunked) Output of Grid Variables or unchunked of Grid Variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_mode</span> <span class="o">=</span> <span class="s2">&quot;onefile&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_unchunked</span> <span class="o">=</span> <span class="mi">1</span>
<span class="go">[gxx.h5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">IO</span><span class="p">::</span><span class="n">out_mode</span> <span class="o">=</span> <span class="s2">&quot;proc&quot;</span>
<span class="go">[gxx.file_0.h5]</span>
<span class="go">[gxx.file_1.h5]</span>
<span class="go">[gxx.file_2.h5]</span>
<span class="go">. . .</span>
</pre></div>
</div>
</li>
<li><p>Do checkpointing with CarpetIOHDF5</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IOHDF5</span><span class="p">::</span><span class="n">checkpoint</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>include:: CactusBase.rst</p>
<p>include:: Llama.rst</p>
<p>include:: CactusNumerical.rst</p>
<p>include:: EinsteinBase.rst</p>
<p>include:: EinsteinEOS.rst</p>
<p>include:: EinsteinEvolve.rst</p>
<p>include:: CactusConnect.rst</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ThornWrite/ThornWrite.html" class="btn btn-neutral float-right" title="Thorn Write" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../GetStart.html" class="btn btn-neutral float-left" title="Get Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Yu Liu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>