

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Get Start &mdash; Cactus 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Thorn Guide" href="Thorn.html" />
    <link rel="prev" title="Welcome to Cactus’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Cactus
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Get Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#flesh">Flesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="#driver">Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modularity">Modularity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install">Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#required-software">Required Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mac">Mac</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#getcomponents-tools">GetComponents Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simfactory-tools">SimFactory Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-the-einstein-toolkit">Building the Einstein Toolkit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-einstein-toolkit">Running the Einstein Toolkit</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Thorn.html">Thorn Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThornWrite.html">Thorn Write</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cactus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Get Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/note/GetStart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="get-start">
<h1>Get Start<a class="headerlink" href="#get-start" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The largest user base for Cactus is in the field of numerical relativity where, for example, over 100 components are now shared among over fifteen different groups through the <a class="reference external" href="http://einsteintoolkit.org/index.html">Einstein Toolkit</a>.</p>
<p>Cactus is a component framework.
Its components are called thorns whereas the framework itself is called the flesh.
The flesh is the core of Cactus, it provides the APIs for thorns to communicate with each other, and performs a number of administrative tasks at build–time and run–time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Cactus API supports C/C++ and F77/F90 programming languages for the thorns. This makes it easier for scientists to turn existing codes into thorns which can then make use of the complete Cactus infrastructure, and in turn be used by other thorns within Cactus.</p>
</div>
<p>Two steps to learn Cactus:</p>
<ul class="simple">
<li><a class="reference external" href="http://cactuscode.org/documentation/UsersGuide.pdf">Cactus Guides</a></li>
<li><a class="reference external" href="http://einsteintoolkit.org/documentation/ThornGuide.php">Thorns List</a></li>
</ul>
<div class="section" id="flesh">
<h3>Flesh<a class="headerlink" href="#flesh" title="Permalink to this headline">¶</a></h3>
<p>At run-time the flesh parses a user provided parameter file which defines which thorns are required and provides key-value pairs of parameter assignments.
The flesh then activates only the required thorns, sets the given parameters, using default values for parameters which are not specified in the parameter file, and creates the schedule of which functions provided by the activated thorns to run at which time.</p>
<div class="figure">
<img alt="../_images/flesh.png" src="../_images/flesh.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to ensure code portability, the flesh is written in ANSI C. Thorns, however, may be written in C, C++, FORTRAN 77 or Fortran 90. In order to ensure that thorns are platform independent, the configuration script determines various machine-specific details, such as the presence or absence of certain non-ANSI C functions or the sizes of variables, which vary from platform to platform – in order to avoid problems with this, e.g. in cross-language calls or parallel jobs distributed across heterogeneous platforms, Cactus defines a set of types, such as <em>CCTK_REAL</em>, <em>CCTK_INT</em>, which are guaranteed to have the same size on all platforms and in all languages. This also means that runs can produce exactly the same results on different machines, and checkpoint files created on one machine can be restarted on any other.</p>
</div>
</div>
<div class="section" id="driver">
<h3>Driver<a class="headerlink" href="#driver" title="Permalink to this headline">¶</a></h3>
<p>Storage for the thorns’ variables is managed by the driver, ensuring that they can be accessed equally from all languages.</p>
<p>Drivers are responsible for memory management for grid variables, and for all parallel operations. Cactus supports three basic parallelisation operations:</p>
<ul class="simple">
<li>ghost-zone synchronisation between sub-domains;</li>
<li>generalised reduction operators;</li>
<li>generalised interpolation operators.</li>
</ul>
<p>There are two driver thorns: the unigrid <em>PUGH</em> driver and the adaptive mesh refinement (AMR) <em>Carpet</em> driver. Which driver is used is determined by which is activated at run-time.</p>
<div class="figure">
<img alt="../_images/drive.gif" src="../_images/drive.gif" />
</div>
</div>
<div class="section" id="modularity">
<h3>Modularity<a class="headerlink" href="#modularity" title="Permalink to this headline">¶</a></h3>
<p>A thorn is the basic working module within Cactus. All user supplied code goes into thorns, which are, by and large, independent of each other. Relationships among thorns are all based upon relationships among the implementations they provide.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Thorns do not define relationships with other specific thorns, nor do they communicate directly with other thorns. Instead they define relationships with an interface.</p>
</div>
<p>Thorns are grouped into arrangements. This is a logical grouping of thorns which is purely for organisational purposes. The arrangements live in the arrangements directory of the main Cactus directory.</p>
<p>A thorn consists of a subdirectory of an arrangement containing four administrative files written in the Cactus Configuration Language (CCL):</p>
<ul class="simple">
<li><em>interface.ccl</em>: Defines the thorn interface and inheritance along with variables and aliased functions.</li>
<li><em>param.ccl</em>: This defines the parameters that are used to control the thorn.</li>
<li><em>schedule.ccl</em>: This defines which functions are called from the thorn and when they are called. It also handles memory and communication assignment for grid variables.</li>
</ul>
<p>Thorns can also contain</p>
<ul class="simple">
<li><em>configuration.ccl</em>: This file is optional for a thorn. If it exists, it contains extra configuration options of this thorn.</li>
<li>a subdirectory called <em>src</em>, which should hold source files and compilation instructions for the thorn.</li>
<li>a subdirectory <em>src/include</em> for include files.</li>
<li>a <em>README</em> containing a brief description of the thorn.</li>
<li>a <em>doc</em> directory for documentation.</li>
<li>a <em>par</em> directory for example parameter files.</li>
<li>a <em>test</em> subdirectory may also be added, to hold the thorn’s test suite.</li>
</ul>
</div>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://lists.einsteintoolkit.org/mailman/listinfo/users">Users</a> of the Einstein Toolkit are encouraged to <a class="reference external" href="http://einsteintoolkit.org/join.html">register</a> to become one of its.</p>
<div class="section" id="required-software">
<h3>Required Software<a class="headerlink" href="#required-software" title="Permalink to this headline">¶</a></h3>
<p>The main requirements are:</p>
<ul class="simple">
<li>Client tools for Source Code Repositories: CVS, SVN and git</li>
<li>Compilers: C, C++ and Fortran 90</li>
<li>MPI implementation: This is needed for the Carpet driver</li>
<li>Standard development tools: Perl, etc.</li>
</ul>
<div class="section" id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># On Debian/Ubuntu/Mint use this command:</span>
$ sudo apt-get install -y subversion gcc git numactl libgsl-dev libpapi-dev python libhwloc-dev make libopenmpi-dev libhdf5-openmpi-dev libfftw3-dev libssl-dev liblapack-dev g++ curl gfortran patch pkg-config libhdf5-dev libjpeg-turbo?-dev
<span class="c1"># On Fedora use this command:</span>
$ sudo dnf install -y libjpeg-turbo-devel gcc git lapack-devel make subversion gcc-c++ which papi-devel python hwloc-devel openmpi-devel hdf5-openmpi-devel openssl-devel libtool-ltdl-devel numactl-devel gcc-gfortran findutils hdf5-devel fftw-devel patch gsl-devel pkgconfig
$ module load mpi/openmpi-x86_64 <span class="c1"># You will have to repeat the module load command each time you would like to compile or run the code.</span>
<span class="c1"># On Centos use this command:</span>
$ sudo yum install -y epel-release
$ sudo yum install -y libjpeg-turbo-devel gcc git lapack-devel make subversion gcc-c++ which papi-devel hwloc-devel openmpi-devel hdf5-openmpi-devel openssl-devel libtool-ltdl-devel numactl-devel gcc-gfortran hdf5-devel fftw-devel patch gsl-devel
</pre></div>
</div>
</div>
<div class="section" id="mac">
<h4>Mac<a class="headerlink" href="#mac" title="Permalink to this headline">¶</a></h4>
<p>On Mac, please first</p>
<ol class="arabic">
<li><p class="first">Install Xcode from the Apple App Store. In addition agree to Xcode license in Terminal</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo xcodebuild -license
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">install <a class="reference external" href="https://www.macports.org/install.php">MacPorts</a> for your version of the Mac operating system, if you did not already install it</p>
</li>
<li><p class="first">Next, please install the following packages, using the commands:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo port -N install pkgconfig gcc9 openmpi-gcc9 fftw-3 gsl jpeg zlib hdf5 +fortran +gfortran openssl ld64 +ld64_xcode
$ sudo port <span class="k">select</span> mpi openmpi-gcc9-fortran
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>
<div class="section" id="getcomponents-tools">
<h3>GetComponents Tools<a class="headerlink" href="#getcomponents-tools" title="Permalink to this headline">¶</a></h3>
<p>A script called GetComponents is used to fetch the components of the Einstein Toolkit. You may download and make it executable it as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/
$ curl -kLO https://raw.githubusercontent.com/gridaphobe/CRL/ET_2019_03/GetComponents
$ chmod u+x GetComponents
</pre></div>
</div>
<p>Below checks out Cactus, the Einstein Toolkit thorns, the Simulation Factory and example parameter files into a directory named Cactus.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./GetComponents --parallel https://bitbucket.org/einsteintoolkit/manifest/raw/ET_2019_03/einsteintoolkit.th
</pre></div>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<ul class="last">
<li><p class="first">Some versions of svn might show problems with the parallel checkout. If you see errors like (svn: E155037: Previous operation has not finished), try without the –parallel option.</p>
</li>
<li><p class="first">svn: E155004: Could not update module &lt;Thorn&gt;</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> &lt;Thorn_Path&gt;
$ svn cleanup
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="simfactory-tools">
<h3>SimFactory Tools<a class="headerlink" href="#simfactory-tools" title="Permalink to this headline">¶</a></h3>
<p>SimFactory needs to be configured before it can be used. The recommended way to do this is to use the setup command. SimFactory contains general support for specific operating systems commonly used on workstations or laptops, including Mac OS, Ubuntu, Cent OS and Scientific Linux. To configure SimFactory for one of these, you need to find the suitable files in <em>simfactory/mdb/optionlists</em> and <em>simfactory/mdb/runscripts</em> and specify their names on the sim setup command line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># for Debian</span>
$ ./simfactory/bin/sim setup-silent --optionlist<span class="o">=</span>debian.cfg --runscript debian.sh
<span class="c1"># for Ubuntu, Mint</span>
$ ./simfactory/bin/sim setup-silent --optionlist<span class="o">=</span>ubuntu.cfg --runscript debian.sh
<span class="c1"># for Fedora (you may have to log out and back in if you have just intalled mpich to make the module command work)</span>
$ module load mpi
$ ./simfactory/bin/sim setup-silent --optionlist<span class="o">=</span>fedora.cfg --runscript debian.sh
<span class="c1"># OSX+MacPorts</span>
$ ./simfactory/bin/sim setup-silent --optionlist<span class="o">=</span>osx-macports.cfg --runscript osx-macports.run
<span class="c1"># OSX+Homebrew</span>
$ ./simfactory/bin/sim setup-silent --optionlist<span class="o">=</span>osx-homebrew.cfg --runscript generic-mpi.run
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Generally, configuring SimFactory means providing an optionlist, for specifying library locations and build options, a submit script for using the batch queueing system, and a runscript, for specifying how Cactus should be run, e.g. which mpirun command to use.</p>
</div>
<p>Follow the on-screen prompts. This will output your choices in the configuration file <em>simfactory/etc/defs.local.ini</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is likely that you will have to further customise this file. You can see some possible option settings in <em>simfactory/etc/defs.local.ini.example</em>.</p>
</div>
<p>SimFactory needs to have a machine definition for every machine that it is run on. If you are using a machine that SimFactory already has a definition for, such as a well-known supercomputer used by others in the Cactus community, then no additional setup is required. If, however, you are running SimFactory on an individual laptop or on an unsupported supercomputer, the setup command will also create a new machine definition for the local machine in <em>./repos/simfactory2/mdb/machines/&lt;hostname&gt;.ini</em>. You may also have to add extra information to this file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><a class="reference external" href="https://simfactory.bitbucket.io/simfactory2/userguide/processterminology.html">Terminology</a></p>
<ul class="simple">
<li>A machine consists of a certain number of nodes, each of which consists of a certain number of cores.</li>
<li>A job requests (from the queuing system) a certain number of nodes, and requests a certain number of cores on each node.</li>
<li>SimFactory starts a number of MPI processes, choosing how many MPI processes should be placed on every node. Each MPI process starts a certain number of OpenMP threads. The distribution of threads onto cores is performed automatically by the operating system and usually cannot be influenced.</li>
</ul>
<p>Note that nodes and cores are requested from the queuing system, while processes and threads are started by SimFactory.</p>
<p>The user chooses the total number of threads (–procs). The user can also choose the number of threads per process (–num-threads) and the number of threads per core (–num-smt). Additionally, the user can also specify the number of cores per node (–ppn) and the number of threads per node (–ppn-used). The number of nodes is always chosen automatically.</p>
<p>Calculations:</p>
<ul class="last simple">
<li>Number of MPI processes: NUM_PROCS := PROCS / NUM_THREADS</li>
<li>constraint: PROCS % NUM_THREADS = 0</li>
<li>Number of nodes: NODES := ceil(PROCS / PPNUSED)</li>
<li>Number of requested cores: PROCS_REQUESTED := NODES * PPN</li>
<li>Number of MPI processes per node: NODE_PROCS := PPNUSED * NUM_SMT/ NUM_THREADS</li>
<li>constraint: PPNUSED * NUM_SMT % NUM_THREADS = 0</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The main SimFactory binary is called “sim” and is located in simfactory/bin. You can execute SimFactory explicitly as ./simfactory/bin/sim, but we recommend that you set up a shell alias in your shell startup file so that you can just use the command “sim”. For bash users this file is .bashrc on Linux. Add the following to the shell startup file:</p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">alias</span> <span class="nv">sim</span><span class="o">=</span>./simfactory/bin/sim
</pre></div>
</div>
</div>
<div class="section" id="building-the-einstein-toolkit">
<h4>Building the Einstein Toolkit<a class="headerlink" href="#building-the-einstein-toolkit" title="Permalink to this headline">¶</a></h4>
<p>Assuming that SimFactory has been successfully set up on your machine, you should be able to build the Einstein Toolkit with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./simfactory/bin/sim build --mdbkey make <span class="s1">&#39;make -j2&#39;</span> --thornlist ../einsteintoolkit.th <span class="p">|</span> cat
</pre></div>
</div>
<p>The most important argument to this command is the <em>–thornlist</em> option, as this tells Cactus which thorns from your source tree you want to include in the configuration.</p>
</div>
<div class="section" id="running-the-einstein-toolkit">
<h4>Running the Einstein Toolkit<a class="headerlink" href="#running-the-einstein-toolkit" title="Permalink to this headline">¶</a></h4>
<p>Simulations must always be created before they can be submitted or run. Since it is very common to want to create a simulation and immediately submit or run it, SimFactory provides the <em>create-run</em> and <em>create-submit</em> commands. These commands create the simulation and then either run or submit it immediately.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are working on a laptop or workstation, you can run SimFactory simulations directly in your terminal without going via a queuing system. However, if you are running SimFactory on a supercomputer with a queuing system, you cannot run simulations directly using the run command - they must instead be submitted to the queuing system, such as the PBS queuing system.</p>
</div>
<p>SimFactory needs to know a name for the simulation as well as what parameter file to use. You can either specify the name on the command line and give the parameter file with the <em>–parfile</em> option.</p>
<p>example</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./simfactory/bin/sim create-run static_tov --parfile<span class="o">=</span>par/static_tov_small_short.par --procs<span class="o">=</span><span class="m">2</span> --num-threads<span class="o">=</span><span class="m">1</span> --ppn-used<span class="o">=</span><span class="m">2</span>  --walltime<span class="o">=</span><span class="m">8</span>:0:0 <span class="p">|</span> cat
</pre></div>
</div>
<p>It is often useful to use a parameter file script, rather than a parameter file, as a basic description of a simulation. For example, when performing a convergence test, many parameters might change between simulations, and changing them all manually is tedious and error-prone.</p>
<p>A parameter file script is a file with a “.rpar” extension which, when executed, generates a file in the same place but with a “.par” extension. You can write a parameter file script in any language.</p>
<div class="section" id="we-provide-examples-in-python">
<h5>We provide examples in python.<a class="headerlink" href="#we-provide-examples-in-python" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">string</span> <span class="k">import</span> <span class="n">Template</span>

<span class="n">dtfac</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="n">lines</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Time::dtfac                   = $dtfac</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(.*)\.rpar$&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\1.par&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="nb">locals</span><span class="p">()))</span>
</pre></div>
</div>
<p>These parameter file scripts look like standard Cactus parameter files but with $var variable replacements (in this case for the dtfac variable). You can define new variables and do calculations in the header and use the variables in the main body.</p>
<p>If you want to use the Cactus $parfile syntax, you need to escape the $</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>IO::out_dir = $$parfile
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Thorn.html" class="btn btn-neutral float-right" title="Thorn Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to Cactus’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Yu Liu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>